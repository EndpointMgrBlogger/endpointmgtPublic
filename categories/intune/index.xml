<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Intune on endpointmgt.com</title><link>https://endpointmgt.com/categories/intune/</link><description>Recent content in Intune on endpointmgt.com</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Thu, 04 Sep 2025 13:11:54 +0100</lastBuildDate><atom:link href="https://endpointmgt.com/categories/intune/index.xml" rel="self" type="application/rss+xml"/><item><title>Sign into an Entra join device with only the SAM account name instead of the full UPN</title><link>https://endpointmgt.com/p/nonupnsignin/</link><pubDate>Thu, 04 Sep 2025 13:11:54 +0100</pubDate><guid>https://endpointmgt.com/p/nonupnsignin/</guid><description>&lt;img src="https://endpointmgt.com/p/nonupnsignin/post/nonUPNSignIn/img/cover.png" alt="Featured image of post Sign into an Entra join device with only the SAM account name instead of the full UPN" />&lt;p>So you&amp;rsquo;re making the leap into the world of Cloud only or cloud first and moving devices to Entra joined. Did you know the standard login process for entra join changes the way users sign in? By default, entra join devices will require the user to sign in with their work or school account, in other words, their Microsoft 365 email address or more accurately, their User Principle Name (UPN). Whereas domain or hybrid domain join devices will expect the user to login with their SAM Account Name.&lt;/p>
&lt;p>Did you know that we can change this?&lt;/p>
&lt;h2 id="reasons-to-update">Reasons to Update
&lt;/h2>&lt;ul>
&lt;li>Keep user experience consistent between the different device join types&lt;/li>
&lt;li>Reduce failed login attempts with typos or users not realising the change&lt;/li>
&lt;li>Reduced communication to users for login changes&lt;/li>
&lt;li>Speed up the login process&lt;/li>
&lt;/ul>
&lt;h2 id="understanding-the-upn">Understanding the UPN
&lt;/h2>&lt;p>Lets break it down. You can see that the UPN is name of the SAM Account Name and the email domain name. As already explained, by default the user needs to type in the full UPN when signing in.&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/nonupnsignin/post/nonUPNSignIn/img/AccountMakeUp.svg"
loading="lazy"
alt="Login"
>&lt;/p>
&lt;p>Now that you understand the concept of where the UPN comes from, lets change the sign in experience to just require the first part and save users having to type out the entire UPN.&lt;/p>
&lt;h2 id="what-youll-currently-see">What you&amp;rsquo;ll currently see
&lt;/h2>&lt;p>If you have the default configuration, this is what you&amp;rsquo;re users will see when logging in. You can tell it&amp;rsquo;s the default as it&amp;rsquo;ll say &lt;strong>Sign in to: Your Work or School Account&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/nonupnsignin/post/nonUPNSignIn/img/SigninBefore.png"
width="1275"
height="956"
srcset="https://endpointmgt.com/p/nonupnsignin/post/nonUPNSignIn/img/SigninBefore_hu_b51562f15deb9924.png 480w, https://endpointmgt.com/p/nonupnsignin/post/nonUPNSignIn/img/SigninBefore_hu_a61357b447ccd178.png 1024w"
loading="lazy"
alt="Before Change"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;h2 id="what-it-could-look-like">What it could look like
&lt;/h2>&lt;p>Once you&amp;rsquo;ve deployed the configuration below, this is what you&amp;rsquo;re users will see when logging in. The login experience will update to show &lt;strong>Sign In to: DomainName.com&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/nonupnsignin/post/nonUPNSignIn/img/SigninAfter.png"
width="1022"
height="766"
srcset="https://endpointmgt.com/p/nonupnsignin/post/nonUPNSignIn/img/SigninAfter_hu_c85b40bbaa26fbba.png 480w, https://endpointmgt.com/p/nonupnsignin/post/nonUPNSignIn/img/SigninAfter_hu_c8881c850aac8022.png 1024w"
loading="lazy"
alt="After Change"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;h2 id="configure-the-the-login-experience">Configure the the login experience
&lt;/h2>&lt;p>To configure the login, we&amp;rsquo;re going to utilise a setting within Intune&amp;rsquo;s settings catalogue&lt;/p>
&lt;h3 id="configure-preferred-aad-tenant-domain-name-policy">Configure Preferred Aad Tenant Domain Name Policy
&lt;/h3>&lt;ol>
&lt;li>Log into Intune&lt;/li>
&lt;li>Navigate to &lt;kbd>Devices &amp;gt; Windows &amp;gt; Configuration &amp;gt; Create &amp;gt; New Policy&lt;/kbd>&lt;/li>
&lt;li>Select Platform &lt;kbd>Windows 10 and later&lt;/kbd>&lt;/li>
&lt;li>Select Profile Type &lt;kbd>Settings Catalog &amp;gt; Create&lt;/kbd>&lt;/li>
&lt;li>Give your policy a suitable name, then &lt;kbd>Next&lt;/kbd>&lt;/li>
&lt;li>Select &lt;kbd>Add Settings&lt;/kbd>&lt;/li>
&lt;li>Search for &lt;strong>Preferred Aad Tenant Domain Name&lt;/strong>&lt;/li>
&lt;li>Select &lt;kbd>Authentication&lt;/kbd>&lt;/li>
&lt;li>Tick &lt;kbd>Preferred Aad Tenant Domain Name&lt;kbd>&lt;/li>
&lt;li>Close the settings tag with the cross on the top right&lt;/li>
&lt;li>Within the Preferred Aad Tenant Domain Name type in your domain unque custom domain name, such as &lt;strong>ABCCompany.com&lt;/strong> - Don&amp;rsquo;t include the &lt;strong>@&lt;/strong> sign.&lt;/li>
&lt;li>Select &lt;kbd>Next &amp;gt; Next&lt;/kbd>&lt;/li>
&lt;li>Assign the policy to an Entra group of test devices.
Note - I would suggest a static test group for the testing phase then moving when you&amp;rsquo;re ready to deploy to production, using the &lt;strong>All Devices&lt;/strong> with an assignment filter or a dynamic entra group once you&amp;rsquo;re ready to deploy.&lt;/li>
&lt;li>The policy should look something like this&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://endpointmgt.com/p/nonupnsignin/post/nonUPNSignIn/img/IntunePolicy.png"
width="698"
height="852"
srcset="https://endpointmgt.com/p/nonupnsignin/post/nonUPNSignIn/img/IntunePolicy_hu_41d5c7bacf7b7840.png 480w, https://endpointmgt.com/p/nonupnsignin/post/nonUPNSignIn/img/IntunePolicy_hu_3c6a20377184d538.png 1024w"
loading="lazy"
alt="Intune Configuration"
class="gallery-image"
data-flex-grow="81"
data-flex-basis="196px"
>&lt;/p>
&lt;ol start="13">
&lt;li>&lt;kbd>Create&lt;/kbd> once you&amp;rsquo;re happy with the configuration and assignment&lt;/li>
&lt;/ol>
&lt;h3 id="test-the-new-login-experience">Test the new login experience
&lt;/h3>&lt;p>Once a device is added and sync&amp;rsquo;d to the test group and the policy is received by the device. The login experience will update to show &lt;strong>Sign In to: DomainName.com&lt;/strong>&lt;/p>
&lt;p>Log into the device with just the SAM Account Name. If you&amp;rsquo;re logged in successful, you&amp;rsquo;ve successful improved the login experience and can deploy wider.&lt;/p>
&lt;p>As always, thanks for reading!&lt;/p></description></item><item><title>Conditional Access and MFA on Shared Windows Devices with Intune</title><link>https://endpointmgt.com/p/intune-shared-devices-mfa-conditional-access/</link><pubDate>Mon, 01 Sep 2025 16:23:48 +0100</pubDate><guid>https://endpointmgt.com/p/intune-shared-devices-mfa-conditional-access/</guid><description>&lt;img src="https://endpointmgt.com/p/intune-shared-devices-mfa-conditional-access/post/SharedWindowsDeviceandMFA/Img/cover.png" alt="Featured image of post Conditional Access and MFA on Shared Windows Devices with Intune" />&lt;p>Imagine the scene; You&amp;rsquo;ve started to adopt Microsoft Intune for device management, moving fully to the cloud. ✅ Getting shot of Group Policy management and even Configuration Manager ✅, you&amp;rsquo;ve nailed single user affinity devices ✅ and even rolled out &lt;a class="link" href="https://endpointmgt.com/p/whfbcloudkerberos/" >Windows Hello for Business&lt;/a> ✅ to improve the user sign in experience and security. You then turn your hand to shared devices and its not going so well. It works ✅ — but it isn’t seamless ⚠️. Did you know your MFA configuration might be the culprit?&lt;/p>
&lt;p>Shared Windows devices in teaching labs, libraries, and lecture theatres need to “just work.” But when Microsoft Intune and Conditional Access are combined with Windows Autopilot pre-provisioning, things can go wrong in unexpected ways.&lt;/p>
&lt;p>A common issue we’ve seen is that MFA never prompts the user during login. On the surface, this might look like a smoother experience. In reality, it means no Primary Refresh Token (PRT) is established and without a PRT, seamless SSO fails. The knock-on effect is that students (or staff) can’t sync Company Portal policies, device configuration stalls, and Windows subscription activation doesn’t apply correctly.&lt;/p>
&lt;h2 id="why-it-happens">Why It Happens
&lt;/h2>&lt;ul>
&lt;li>Shared Windows devices (Azure AD joined, Intune managed, no primary user) don’t issue MFA at login.&lt;/li>
&lt;li>Conditional Access policies apply to all users and apps without exclusions.&lt;/li>
&lt;li>Non-interactive logins (Company Portal, Intune MDM, Windows licensing) then try to authenticate — but get blocked silently by Conditional Access because MFA is required but not triggered.&lt;/li>
&lt;li>Result: Company Portal only partially works, device policies sit as “Pending,” and subscription activation is delayed.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Interactive vs. Non-Interactive Sign-Ins in Entra ID&lt;/strong>&lt;/p>
&lt;p>When a user signs in to a device or application, Entra ID records the sign-in as either interactive or non-interactive.&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/intune-shared-devices-mfa-conditional-access/post/SharedWindowsDeviceandMFA/Img/logintype.png"
width="1220"
height="256"
srcset="https://endpointmgt.com/p/intune-shared-devices-mfa-conditional-access/post/SharedWindowsDeviceandMFA/Img/logintype_hu_f1eac52d6d48ce4e.png 480w, https://endpointmgt.com/p/intune-shared-devices-mfa-conditional-access/post/SharedWindowsDeviceandMFA/Img/logintype_hu_f3287712bd1400c.png 1024w"
loading="lazy"
alt="Entra Sign in"
class="gallery-image"
data-flex-grow="476"
data-flex-basis="1143px"
>&lt;/p>
&lt;ul>
&lt;li>Interactive sign-ins occur when the user is directly prompted to enter their credentials or complete an MFA challenge. This includes typing in a password, using Windows Hello, or approving a prompt on their phone. Interactive sign-ins always involve visible user interaction.&lt;/li>
&lt;li>Non-interactive sign-ins happen silently in the background, usually when a token is being refreshed or when applications/services request access on behalf of the user. For example, Microsoft Intune, Company Portal, or Office apps will often use non-interactive sign-ins to request tokens without interrupting the user.&lt;/li>
&lt;/ul>
&lt;p>The distinction matters in Conditional Access: if MFA is required on a non-interactive sign-in, the user won’t see a prompt right away. Instead, the process fails until something triggers an interactive sign-in, which can lead to confusion and policy mis-applications on shared devices.&lt;/p>
&lt;h2 id="the-user-experience">The user experience
&lt;/h2>&lt;p>Instead of being prompted for MFA at sign-in, students only discover the problem when:&lt;/p>
&lt;ul>
&lt;li>Device configuration targeted at the user is delayed&lt;/li>
&lt;li>OneDrive sync client doesn&amp;rsquo;t automatically sign in and re-direct folders&lt;/li>
&lt;li>Edge automatic sign in and sync doesn&amp;rsquo;t automatically sign in and provide your user preferences&lt;/li>
&lt;li>Outlook prompts the user for their email address upon first launch&lt;/li>
&lt;li>Windows Enterprise/Education edition activation is delayed&lt;/li>
&lt;/ul>
&lt;p>In teaching environments, this disruption is magnified — students move rapidly between machines, and IT staff can’t troubleshoot MFA prompts that never appear.&lt;/p>
&lt;h2 id="issue-confirmation">Issue confirmation
&lt;/h2>&lt;p>So you&amp;rsquo;ve read this far and wonder if the user experience witnessed is caused by Conditional Access too? Let&amp;rsquo;s confirm before remediating.&lt;/p>
&lt;p>You can first this in 2 way; one the affected device or via the entra sign in logs.&lt;/p>
&lt;h3 id="on-the-device">On the device
&lt;/h3>&lt;p>The simplest way to check is get the user to login and launch the start menu. Select their user account icon (either their picture or initials, if they don&amp;rsquo;t have a picture), if MFA is at fault here, they&amp;rsquo;ll get&amp;hellip;&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/intune-shared-devices-mfa-conditional-access/post/SharedWindowsDeviceandMFA/Img/verifyprompt.png"
width="528"
height="324"
srcset="https://endpointmgt.com/p/intune-shared-devices-mfa-conditional-access/post/SharedWindowsDeviceandMFA/Img/verifyprompt_hu_23eba057a30810c5.png 480w, https://endpointmgt.com/p/intune-shared-devices-mfa-conditional-access/post/SharedWindowsDeviceandMFA/Img/verifyprompt_hu_8d4d39ced900282d.png 1024w"
loading="lazy"
alt="Verify Account Prompt"
class="gallery-image"
data-flex-grow="162"
data-flex-basis="391px"
>&lt;/p>
&lt;p>They can always verify account here and configuration will start to apply but by this point, the damage to SSO and the user experience is already disrupted. Not to mention that they might need to log off and on to get OneDrive, Edge and other configuration to automatically apply.&lt;/p>
&lt;h3 id="entra-logs">Entra Logs
&lt;/h3>&lt;p>You&amp;rsquo;ll need a role that allows access to user sign in logs and conditional access (to see the problematic policy report). Remember that sign in logs take around 10 minutes to populate so log into an affected device and wait before looking to the logs.&lt;/p>
&lt;ol>
&lt;li>Navigate to &lt;kbd>entra.microsoft.com&lt;/kbd>&lt;/li>
&lt;li>Go to &lt;kbd>Entra ID &amp;gt; Users &amp;gt; Select test User &amp;gt; Sign In Logs&lt;/kbd>&lt;/li>
&lt;li>Select &lt;kbd>User sign-ins (non-interactive)&lt;/kbd>&lt;/li>
&lt;li>Now look for an interrupted sign in for Windows Search, Device Management&amp;hellip;&lt;/li>
&lt;li>Select the &lt;kbd>sign in log&lt;/kbd>, it might be under aggregate, if so select that line and select the &lt;kbd>expanded record&lt;/kbd>&lt;/li>
&lt;li>You&amp;rsquo;ll see the basic authentication information with a message such as Failure Reason&lt;/li>
&lt;li>Select &lt;kbd>Conditional Access&lt;/kbd>&lt;/li>
&lt;li>Here you&amp;rsquo;ll the policy causing the issue&lt;/li>
&lt;li>You&amp;rsquo;ll see within the grant control required.&lt;/li>
&lt;/ol>
&lt;h2 id="intune-conditional-access-remediation-options-for-mfa-on-shared-devices">Intune Conditional Access Remediation Options for MFA on Shared Devices
&lt;/h2>&lt;p>Now that you&amp;rsquo;ve confirmed the issue, we need a solution! To balance security and usability, organisations need to exclude shared devices from strict MFA requirements, while still maintaining strong controls elsewhere.&lt;/p>
&lt;h3 id="which-approach-should-you-use">Which Approach Should You Use?
&lt;/h3>&lt;ul>
&lt;li>✅ &lt;strong>Exclude Intune / Windows Store for Business&lt;/strong> → if device sync and subscription activation are the main blockers.&lt;/li>
&lt;li>✅ &lt;strong>Filter by Enrollment Profile&lt;/strong> → if all shared devices use a dedicated Autopilot profile.&lt;/li>
&lt;li>✅ &lt;strong>Filter by Extension Attribute&lt;/strong> → if you need granular control across mixed Autopilot profiles or to tag only specific labs.&lt;/li>
&lt;li>❌ &lt;strong>Exclude by Network Location&lt;/strong> → only safe if you can guarantee shared devices are the only ones using those public IPs. Avoid if BYOD devices connect to the same network.&lt;/li>
&lt;li>❌ &lt;strong>Introduce Web Signin&lt;/strong> → only safe if you can guarantee shared devices will always have an internet connection.&lt;/li>
&lt;/ul>
&lt;h3 id="exclude-microsoft-intune">Exclude Microsoft Intune
&lt;/h3>&lt;p>To prevent Company Portal and user initiated sync&amp;rsquo;s with Microsoft Intune being affected by your conditional access, the best advice would be to simply exclude the app entirely from the offending CA.&lt;/p>
&lt;ol>
&lt;li>Navigate to &lt;kbd>entra.microsoft.com&lt;/kbd>&lt;/li>
&lt;li>Go to &lt;kbd>Entra ID &amp;gt; Conditional Access &amp;gt; Policies&lt;/kbd>&lt;/li>
&lt;li>Select the MFA policy (remember you might have more than one, so repeat steps 4-9)&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>It might be a good idea here to review your other policies for grant controls and consider adding this exclude to those too. For example &amp;ldquo;Require Compliant devices&amp;rdquo;.&lt;/li>
&lt;/ul>
&lt;ol start="4">
&lt;li>Select &lt;kbd>Target resources&lt;/kbd>&lt;/li>
&lt;li>Select &lt;kbd>Exclude&lt;/kbd>&lt;/li>
&lt;li>Select &lt;kbd>Select or the blue text below select&lt;/kbd>&lt;/li>
&lt;li>Search for and select &amp;ldquo;Microsoft Intune&amp;rdquo;. If this doesn&amp;rsquo;t appear, depending on your tenant look for &amp;ldquo;Microsoft.Intune&amp;rdquo; It&amp;rsquo;s the same App ID but some tenants have a dot in the middle. Good old Microsoft.&lt;/li>
&lt;li>Select the blue &lt;kbd>Select&lt;/kbd> button
&lt;ul>
&lt;li>Example screenshot of the policy filter in action:;&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://endpointmgt.com/p/intune-shared-devices-mfa-conditional-access/post/SharedWindowsDeviceandMFA/Img/ExIntune.png"
width="598"
height="872"
srcset="https://endpointmgt.com/p/intune-shared-devices-mfa-conditional-access/post/SharedWindowsDeviceandMFA/Img/ExIntune_hu_eb4f0c1c40f87043.png 480w, https://endpointmgt.com/p/intune-shared-devices-mfa-conditional-access/post/SharedWindowsDeviceandMFA/Img/ExIntune_hu_823876bebb4949e0.png 1024w"
loading="lazy"
alt="Exclude Microsoft Intune"
class="gallery-image"
data-flex-grow="68"
data-flex-basis="164px"
>&lt;/p>
&lt;ol start="9">
&lt;li>Save the policy.&lt;/li>
&lt;li>The policy will be updated with the new exclusion and take around 20 minutes to apply.&lt;/li>
&lt;/ol>
&lt;h3 id="exclude-windows-store-for-business">Exclude Windows Store for Business
&lt;/h3>&lt;p>In the same way as Microsoft Intune. Subscription Activation of Windows is handled by Windows Store for Business. If devices are failing to uplift to Enterprise, exclude the Windows Store for Business Enterprise app entirely from the offending CA. Microsoft also include this in their &lt;a class="link" href="https://learn.microsoft.com/en-us/windows/deployment/windows-subscription-activation?pivots=windows-11#adding-conditional-access-policy" target="_blank" rel="noopener"
>documentation.&lt;/a>&lt;/p>
&lt;ol>
&lt;li>Navigate to &lt;kbd>entra.microsoft.com&lt;/kbd>&lt;/li>
&lt;li>Go to &lt;kbd>Entra ID &amp;gt; Conditional Access &amp;gt; Policies&lt;/kbd>&lt;/li>
&lt;li>Select the MFA policy (remember you might have more than one, so repeat steps 4-9)
&lt;ul>
&lt;li>It might be a good idea here to review you&amp;rsquo;re other policies for grant controls and consider adding this exclude to those too.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Select &lt;kbd>Target resources&lt;/kbd>&lt;/li>
&lt;li>Select &lt;kbd>Exclude&lt;/kbd>&lt;/li>
&lt;li>Select &lt;kbd>Select or the blue text below select&lt;/kbd>&lt;/li>
&lt;li>Search for and select &amp;ldquo;Windows Store for Business&amp;rdquo;. If this doesn&amp;rsquo;t appear, depending on your tenant look for &amp;ldquo;Universal Store Service APIs and Web Application&amp;rdquo; It&amp;rsquo;s the same App ID as the Windows Store.&lt;/li>
&lt;li>Select the blue &lt;kbd>Select&lt;/kbd> button
&lt;ul>
&lt;li>Example screenshot of the policy filter in action:;&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://endpointmgt.com/p/intune-shared-devices-mfa-conditional-access/post/SharedWindowsDeviceandMFA/Img/ExWindowsStore.png"
width="626"
height="864"
srcset="https://endpointmgt.com/p/intune-shared-devices-mfa-conditional-access/post/SharedWindowsDeviceandMFA/Img/ExWindowsStore_hu_ecb07e1367863d07.png 480w, https://endpointmgt.com/p/intune-shared-devices-mfa-conditional-access/post/SharedWindowsDeviceandMFA/Img/ExWindowsStore_hu_ba06b3b52216a959.png 1024w"
loading="lazy"
alt="Exclude Windows Store for Business"
class="gallery-image"
data-flex-grow="72"
data-flex-basis="173px"
>&lt;/p>
&lt;ol start="9">
&lt;li>&lt;kbd>Save&lt;/kbd> the policy.&lt;/li>
&lt;li>The policy will be updated with the new exclusion and take around 20 minutes to apply.&lt;/li>
&lt;/ol>
&lt;h3 id="filter-for-shared-devices">Filter for shared devices
&lt;/h3>&lt;p>Now comes the fun part! Depending on your environment will depend on the best approach here. I&amp;rsquo;ll cover off a general exclude and then a 2 tailored options for shared devices.&lt;/p>
&lt;h4 id="network-approach">Network Approach
&lt;/h4>&lt;p>This option only works if you want to exclude all devices that reside on your internal network. If you have other device use cases or allow users to connect personal devices to the same network, even connected to different vlans, this isn&amp;rsquo;t the option for you. To clarify, if internet traffic for these devices is all route through the same public IP addresses to M365, I don&amp;rsquo;t recommend this approach. Be warned!&lt;/p>
&lt;ol>
&lt;li>Obtain your public facing IP address(es)&lt;/li>
&lt;li>Navigate to &lt;kbd>entra.microsoft.com&lt;/kbd>&lt;/li>
&lt;li>Go to &lt;kbd>Entra ID &amp;gt; Conditional Access &amp;gt; Named Locations&lt;/kbd>&lt;/li>
&lt;li>Review the IP ranges locations to ensure you don&amp;rsquo;t already have these setup. If you do, skip to step X&lt;/li>
&lt;li>Select &lt;kbd>IP Ranges location&lt;/kbd>&lt;/li>
&lt;li>Provide a name such as the location or campus&lt;/li>
&lt;li>Click on the &lt;kbd>+&lt;/kbd> icon&lt;/li>
&lt;li>Add the IPv4 range with /24 or/32 etc (I won&amp;rsquo;t explain these here)&lt;/li>
&lt;li>Select &lt;kbd>Add&lt;/kbd>&lt;/li>
&lt;li>Navigate to &lt;kbd>Entra ID &amp;gt; Conditional Access &amp;gt; Policies&lt;/kbd>&lt;/li>
&lt;li>Select the MFA policy&lt;/li>
&lt;li>Select &lt;kbd>Network&lt;/kbd>&lt;/li>
&lt;li>Select &lt;kbd>Yes&lt;/kbd> on Configure&lt;/li>
&lt;li>Select &lt;kbd>Exclude&lt;/kbd>&lt;/li>
&lt;li>Select &lt;kbd>Selected network and locations&lt;/kbd>&lt;/li>
&lt;li>Select &lt;kbd>None&lt;/kbd>&lt;/li>
&lt;li>Add the newly added or existing named location and select &lt;kbd>Save&lt;/kbd>
&lt;ul>
&lt;li>Example screenshot of the policy filter in action:;&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://endpointmgt.com/p/intune-shared-devices-mfa-conditional-access/post/SharedWindowsDeviceandMFA/Img/ExcludeNetworkLocation.png"
width="746"
height="716"
srcset="https://endpointmgt.com/p/intune-shared-devices-mfa-conditional-access/post/SharedWindowsDeviceandMFA/Img/ExcludeNetworkLocation_hu_85f0b295908d9ed1.png 480w, https://endpointmgt.com/p/intune-shared-devices-mfa-conditional-access/post/SharedWindowsDeviceandMFA/Img/ExcludeNetworkLocation_hu_479498d75a243e61.png 1024w"
loading="lazy"
alt="Exclude Network Location"
class="gallery-image"
data-flex-grow="104"
data-flex-basis="250px"
>&lt;/p>
&lt;ol start="18">
&lt;li>Remember to then &lt;kbd>Save&lt;/kbd> the conditional access policy.&lt;/li>
&lt;/ol>
&lt;p>Now that you&amp;rsquo;ve excluded the MFA from the named location, the policy will take around 20 minutes to update and from then, MFA will not prompt users on this network. If you&amp;rsquo;ve selected the route, it would be a good idea to add an additional MFA policy that is targeted to this network. For example you could have a policy that includes this network but only targets the browser and Office 365.&lt;/p>
&lt;p>Note- This will only work if devices are logging in, when on your network. If they take a shared device home and login for the first time, this solution doesn&amp;rsquo;t address the issue. Keep reading ;).&lt;/p>
&lt;h4 id="filter-for-devices-approach">Filter for Devices Approach
&lt;/h4>&lt;p>You&amp;rsquo;re still with us. Good, this is where it gets interesting and becomes tailored to your device use case. If you only want to exclude the shared devices from the policies, this is where we&amp;rsquo;ll use Filter for Devices. It&amp;rsquo;s been around for quite some time but in my experience, it&amp;rsquo;s relatively less known.&lt;/p>
&lt;p>You can use &amp;ldquo;Filter for Devices&amp;rdquo; within a Conditional Access policy to control if it should or shouldn&amp;rsquo;t apply via includes and excludes criteria. There are a number of filter options that can be selected. From Intune Compliance state, Device Name, EnrolmentProfileName and so on. Some of these are safer to use than others. I&amp;rsquo;d recommend not using a filter that a user could manipulate. For example a user could change their Device Name for exclude their device from a targeted CA policy.&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/intune-shared-devices-mfa-conditional-access/post/SharedWindowsDeviceandMFA/Img/CA-FilterforDevices.png"
width="1615"
height="882"
srcset="https://endpointmgt.com/p/intune-shared-devices-mfa-conditional-access/post/SharedWindowsDeviceandMFA/Img/CA-FilterforDevices_hu_fbce869297a4cc8.png 480w, https://endpointmgt.com/p/intune-shared-devices-mfa-conditional-access/post/SharedWindowsDeviceandMFA/Img/CA-FilterforDevices_hu_6f288a2a7c6d923c.png 1024w"
loading="lazy"
alt="Filter for Devices"
class="gallery-image"
data-flex-grow="183"
data-flex-basis="439px"
>&lt;/p>
&lt;p>We&amp;rsquo;ll run through 2 exclude options here, based on;&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Windows Autopilot enrolment profile&lt;/strong> - used by the shared devices onboarding via Windows Autopilot&lt;/li>
&lt;li>&lt;strong>Extension Attributes&lt;/strong> (often used for &lt;a class="link" href="https://learn.microsoft.com/en-us/security/privileged-access-workstations/privileged-access-deployment" target="_blank" rel="noopener"
>Privileged Access Workstations - PAW&lt;/a>) used when you want to target all or a subset of devices.&lt;/li>
&lt;/ul>
&lt;p>The mechanics behind Filter for devices is the same;&lt;/p>
&lt;ol>
&lt;li>Navigate to &lt;kbd>entra.microsoft.com&lt;/kbd>&lt;/li>
&lt;li>Go to &lt;kbd>Entra ID &amp;gt; Conditional Access &amp;gt; Policies&lt;/kbd>&lt;/li>
&lt;li>Select the MFA policy&lt;/li>
&lt;li>Select &lt;kbd>Conditions&lt;/kbd>&lt;/li>
&lt;li>Select &lt;kbd>Filter for Devices &amp;gt; Not Configured&lt;/kbd>&lt;/li>
&lt;li>Select &lt;kbd>Configure&lt;/kbd>&lt;/li>
&lt;li>Select the radial for &lt;kbd>Exclude filtered devices from policy&lt;/kbd>&lt;/li>
&lt;li>Select the &lt;kbd>property&lt;/kbd> that you wish to exclude from the drop down
&lt;ul>
&lt;li>In our case it&amp;rsquo;ll be EnrollmentProfileName or ExtensionAttribute(1-15)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Operator should be &amp;ldquo;Equals&amp;rdquo;&lt;/li>
&lt;li>Value should is a string with the value of
&lt;ul>
&lt;li>In our case it&amp;rsquo;ll be the EnrollmentProfileName from the Windows Autopilot Deployment Profiles blade within&lt;br>
&lt;a class="link" href="https://intune.microsoft.com/#view/Microsoft_Intune_Enrollment/AutopilotDeploymentProfiles.ReactView" target="_blank" rel="noopener"
>Microsoft Intune&lt;/a>&lt;/li>
&lt;li>Or a string value of our choice for the ExtensionAttribute, such as &amp;ldquo;Shared-MFAExcluded&amp;rdquo;&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Select the blue &lt;kbd>Done&lt;/kbd> once complete
&lt;ul>
&lt;li>Example screenshot of the policy filter in action:;&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://endpointmgt.com/p/intune-shared-devices-mfa-conditional-access/post/SharedWindowsDeviceandMFA/Img/ExcludeDevice.png"
width="1609"
height="872"
srcset="https://endpointmgt.com/p/intune-shared-devices-mfa-conditional-access/post/SharedWindowsDeviceandMFA/Img/ExcludeDevice_hu_1e0f58111e01b414.png 480w, https://endpointmgt.com/p/intune-shared-devices-mfa-conditional-access/post/SharedWindowsDeviceandMFA/Img/ExcludeDevice_hu_4b20f97fdbf1159c.png 1024w"
loading="lazy"
alt="Exclude Using Filer for Devices"
class="gallery-image"
data-flex-grow="184"
data-flex-basis="442px"
>&lt;/p>
&lt;ol start="12">
&lt;li>Remember to Save the policy to finish editing the CA policy&lt;/li>
&lt;li>Again, wait around 20 minutes for the policy changes to take effect.&lt;/li>
&lt;/ol>
&lt;p>If you&amp;rsquo;ve used the EnrollmentProfileName property and devices are enrolled using that deployment profile, your work here is done and you can test with a new enrolment. If however you&amp;rsquo;ve opted for ExtensionAttribute, the device(s) still need to be tagged.&lt;/p>
&lt;p>&lt;strong>Add Extension Attributes to devices&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/intune-shared-devices-mfa-conditional-access/post/SharedWindowsDeviceandMFA/Img/extensionAttributeDemo.png"
width="549"
height="49"
srcset="https://endpointmgt.com/p/intune-shared-devices-mfa-conditional-access/post/SharedWindowsDeviceandMFA/Img/extensionAttributeDemo_hu_f7286b9865f0eb7e.png 480w, https://endpointmgt.com/p/intune-shared-devices-mfa-conditional-access/post/SharedWindowsDeviceandMFA/Img/extensionAttributeDemo_hu_37977331202d1b2a.png 1024w"
loading="lazy"
alt="Extension Attribute"
class="gallery-image"
data-flex-grow="1120"
data-flex-basis="2688px"
>&lt;/p>
&lt;p>This has been covered by many blog posts over the years so I&amp;rsquo;ll keep this part brief. I might even revise this in future and profile a Powershell script to call graph, watch this space. To understand adding this attributes, you have to understand that these attributes live within Entra, not Intune. The attributes gets added to the Autopilot Entra record. The bonus is that you only ever have to do this once. The downside is that it can&amp;rsquo;t be done via the Entra portal. It has to be done via Graph.&lt;/p>
&lt;p>These blog posts cover how to add the extension attributes to devices&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://ourcloudnetwork.com/configure-device-extension-attributes-in-azure-ad-with-powershell/" target="_blank" rel="noopener"
>ourcloudnetwork.com&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://smbtothecloud.com/dynamically-add-device-extension-attributes-using-remediations/" target="_blank" rel="noopener"
>smbtothecloud.com&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>The concept is simple however;
As an example, this script adds &amp;ldquo;Shared-MFAExcluded&amp;rdquo; to &amp;ldquo;extensionAttribute1&amp;rdquo; of a selected device, based on it&amp;rsquo;s name. I&amp;rsquo;ve kept it very simply without an if query to check the device exists etc but just so you get the concept and to allow for testing.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Powershell" data-lang="Powershell">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># Load the Microsoft Graph module&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">Import-Module&lt;/span> &lt;span class="n">Microsoft&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">Graph&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">Identity&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">DirectoryManagement&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"># Connect to Microsoft Graph with required permissions&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">Connect-MgGraph&lt;/span> &lt;span class="n">-Scopes&lt;/span> &lt;span class="s2">&amp;#34;Directory.ReadWrite.All&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"># Define the device name you want to update&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$DeviceName&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;DEVENV-34429856&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"># Find the device by name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$Device&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">Get-MgDevice&lt;/span> &lt;span class="n">-Filter&lt;/span> &lt;span class="s2">&amp;#34;displayName eq &amp;#39;&lt;/span>&lt;span class="nv">$DeviceName&lt;/span>&lt;span class="s2">&amp;#39;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"># Update extensionAttribute1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">Update-MgDevice&lt;/span> &lt;span class="n">-DeviceId&lt;/span> &lt;span class="nv">$Device&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">Id&lt;/span> &lt;span class="n">-AdditionalProperties&lt;/span> &lt;span class="vm">@&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;extensionAttributes&amp;#34;&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="vm">@&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;extensionAttribute1&amp;#34;&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;Shared-MFAExcluded&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>To confirm that it&amp;rsquo;s worked, you should now see the extensionAttribute within Entra&lt;/p>
&lt;ol>
&lt;li>Navigate to &lt;kbd>entra.microsoft.com&lt;/kbd>&lt;/li>
&lt;li>Go to &lt;kbd>Entra ID &amp;gt; Devices &amp;gt; All Devices&lt;/kbd>&lt;/li>
&lt;li>Search for your device&lt;/li>
&lt;li>Select the device, in my case &lt;kbd>DEVENV-34429856&lt;/kbd>&lt;/li>
&lt;li>At the bottom of the record you should now see the extensionAttribute set.&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://endpointmgt.com/p/intune-shared-devices-mfa-conditional-access/post/SharedWindowsDeviceandMFA/Img/extensionAttributeSet.png"
width="1010"
height="821"
srcset="https://endpointmgt.com/p/intune-shared-devices-mfa-conditional-access/post/SharedWindowsDeviceandMFA/Img/extensionAttributeSet_hu_9533da7df157f045.png 480w, https://endpointmgt.com/p/intune-shared-devices-mfa-conditional-access/post/SharedWindowsDeviceandMFA/Img/extensionAttributeSet_hu_b3b9330b3bc77ff0.png 1024w"
loading="lazy"
alt="Extension Attribute Set"
class="gallery-image"
data-flex-grow="123"
data-flex-basis="295px"
>&lt;/p>
&lt;ol start="6">
&lt;li>Now to test your policy exclusion&amp;hellip;.&lt;/li>
&lt;li>You should now see that the MFA policy now excludes this device from the policy&lt;/li>
&lt;/ol>
&lt;h3 id="an-alternative-option-web-sign-in">&lt;strong>An Alternative Option: Web Sign-in&lt;/strong>
&lt;/h3>&lt;p>In addition to traditional sign-in methods, &lt;strong>Web sign-in&lt;/strong> offers another possibility for shared devices. This option provides a streamlined experience by leveraging cloud-based authentication like MFA, Microsoft Authenticator, Temporary Access Pass (TAP), or FIDO2 security keys.&lt;/p>
&lt;p>The primary drawback of Web sign-in is its complete dependence on a reliable internet connection. Unlike cached credentials from a traditional password login, the Web sign-in option requires an internet connection for &lt;em>every single login&lt;/em>, even if the user has previously signed in to the device. This means if a device loses its network connection, users will be unable to sign in using this method.&lt;/p>
&lt;p>&lt;a class="link" href="https://learn.microsoft.com/en-us/windows/security/identity-protection/web-sign-in/?tabs=intune" target="_blank" rel="noopener"
>More on Web Sign from Microsoft&lt;/a>&lt;/p>
&lt;h4 id="what-if-a-login-fails">&lt;strong>What if a Login Fails?&lt;/strong>
&lt;/h4>&lt;p>You might be wondering if users will know how to switch options if their Web sign-in fails. The good news is that Windows is designed to handle this gracefully. The lock screen will always show multiple sign-in options if they are enabled on the device (e.g., password, PIN, Web sign-in).&lt;/p>
&lt;p>If a Web sign-in attempt fails due to a network issue, the user can simply press &lt;strong>Ctrl + Alt + Delete&lt;/strong> to return to the main login screen. From there, they can select an alternative sign-in method, such as a cached password or PIN, allowing them to complete their login without interruption.&lt;/p>
&lt;h2 id="conclusion">Conclusion
&lt;/h2>&lt;p>Conditional Access and MFA are essential for securing identities in Microsoft 365, but shared devices introduce edge cases that can easily break the user experience. The challenge is that non-interactive logins silently fail when MFA is required but never prompted, leaving users confused and admins troubleshooting stalled configurations.&lt;/p>
&lt;p>By carefully excluding the right enterprise applications, or by using targeted device filters such as Autopilot profiles or extension attributes, you can strike the balance between &lt;strong>security and usability&lt;/strong>. The goal isn’t to weaken MFA, but to apply it intelligently so that shared devices remain functional while personal or high-risk scenarios stay protected.&lt;/p>
&lt;p>As always, test exclusions thoroughly in a controlled environment before rolling them out broadly, and keep monitoring your Entra sign-in logs to validate that policies are working as intended.&lt;/p>
&lt;p>Done right, Conditional Access doesn’t have to be a blocker — it becomes an enabler for seamless, secure, and scalable device management in Microsoft Intune environments.&lt;/p></description></item><item><title>Intune Multi-Admin Approval: Keeping Your Admins Honest (and Safe)</title><link>https://endpointmgt.com/p/multiappapproval/</link><pubDate>Thu, 28 Aug 2025 09:10:17 +0100</pubDate><guid>https://endpointmgt.com/p/multiappapproval/</guid><description>&lt;img src="https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/cover.png" alt="Featured image of post Intune Multi-Admin Approval: Keeping Your Admins Honest (and Safe)" />&lt;p>If you’ve ever woken up in a cold sweat wondering, “What if one of my admin accounts got compromised and someone wiped 5,000 devices overnight?” Firstly, you need more restful sleep, but second, Microsoft has finally heard you.&lt;/p>
&lt;p>Enter &lt;a class="link" href="https://learn.microsoft.com/en-us/intune/intune-service/fundamentals/multi-admin-approval" target="_blank" rel="noopener"
>Multiple Administrative Approval (MAA)&lt;/a> in Intune. Think of it like that classic buddy system from school trips, you can’t make a move without a partner watching you. Except instead of making sure you don’t wander off at the museum gift shop, MAA makes sure no single admin can make big changes to your tenant without someone else giving the thumbs up. Good Right?&lt;/p>
&lt;p>Here’s the gist:&lt;/p>
&lt;ul>
&lt;li>You create access policies that protect certain things called a &amp;ldquo;protection action&amp;rdquo; (apps, device wipe actions, scripts, RBAC changes, and even the MAA policies themselves).&lt;/li>
&lt;li>When an admin makes a change, with a policy configured to protect an action, Intune says, “Not so fast, cowboy”, and holds that request hostage until another admin, someone in your designated approver group reviews it and hits Approve.&lt;/li>
&lt;/ul>
&lt;p>It’s a neat safeguard, but before you run off to secure the kingdom, let’s talk about what you can and can’t do with it.&lt;/p>
&lt;h2 id="the-big-gotcha-its-all-or-nothing">The Big Gotcha: It’s All or Nothing
&lt;/h2>&lt;p>When you set an access policy, it applies &lt;b>tenant-wide&lt;/b>. That means all admins are covered by it, regardless of whether they’re junior Service Desk tech or your top-level cloud architect. You can’t yet assign policies to specific groups, devices, or scenarios.&lt;/p>
&lt;p>For example, wouldn’t it be brilliant if:&lt;/p>
&lt;ul>
&lt;li>A small group of trusted admins could wipe devices immediately, while everyone else required approval?&lt;/li>
&lt;li>Or if corporate-owned devices could be wiped without fuss, but BYOD devices required approval because, let’s face it, accidentally nuking someone’s personal phone is a fast track to HR complaints or even worse?&lt;/li>
&lt;/ul>
&lt;p>Sadly, that flexibility isn’t here—at least not yet. Right now, it’s a blanket rule for everyone.&lt;/p>
&lt;h2 id="why-its-still-worth-it">Why It’s Still Worth It
&lt;/h2>&lt;p>Limitations aside, MAA is a strong step toward protecting against compromised accounts and fat-finger mistakes. Even the best admins occasionally click the wrong thing, and having that extra checkpoint could save your bacon.&lt;/p>
&lt;p>The process also builds transparency: business justifications are logged, approvals and rejections are documented, and everything shows up in the audit logs. That’s not just good for governance, it’s fantastic for compliance conversations when someone inevitably asks, “So, who approved this?”&lt;/p>
&lt;h2 id="living-with-maa">Living with MAA
&lt;/h2>&lt;p>If you’re going to use it, here are a few practical tips:&lt;/p>
&lt;ul>
&lt;li>Have at least two active admin accounts (sounds obvious, but you’d be surprised how often tenants rely on a single person).&lt;/li>
&lt;li>Both admin accounts require either Intune Admin or the appropriate Multi Admin Approval permissions with &lt;a class="link" href="https://learn.microsoft.com/en-us/intune/intune-service/fundamentals/role-based-access-control" target="_blank" rel="noopener"
>Role Based Access Controls (RBAC)&lt;/a>.&lt;/li>
&lt;li>Communicate with your approvers. There’s no built-in notification system for new requests yet, so if it’s urgent, you’ll need to poke them directly.&lt;/li>
&lt;li>Keep an eye on requests, pending changes expire after 30 days if nobody acts on them.&lt;/li>
&lt;/ul>
&lt;h2 id="how-to-configure">How to Configure
&lt;/h2>&lt;p>Alright, so you’re sold on the idea and want to set this up. The good news? The process isn’t rocket science. The bad news? You’ll need two admin accounts handy, because you can’t approve your own request (no cheating the system).&lt;/p>
&lt;p>I&amp;rsquo;ll take you through the process of creating a protected device action of wiping a device. The same process can be followed for other actions.&lt;/p>
&lt;h3 id="create-the-access-policy">Create the Access Policy
&lt;/h3>&lt;ol>
&lt;li>Sign in to the Microsoft Intune admin center with your first admin account.&lt;/li>
&lt;li>Create a group in Entra or if your old fashioned (and stuck in your ways), Active Directory and wait for the group to sync up. (I won&amp;rsquo;t start on why using AD groups in Entra with sync&amp;rsquo;d admins is a bad idea, that&amp;rsquo;s for another day.). This group will act as the Approvers List. Once a protected action is triggered, it&amp;rsquo;ll be this group of users that can approve the action. Even if they&amp;rsquo;re already a GA or Intune admin. Not in this group, they can&amp;rsquo;t approve it!&lt;/li>
&lt;li>Head over to &lt;kbd>Tenant administration &amp;gt; Multi Admin Approval &amp;gt; Access policies&lt;/kbd>.&lt;/li>
&lt;li>Select &lt;kbd>Create&lt;/kbd>.&lt;/li>
&lt;li>On the Basics page, give your policy a name, add an optional description (bonus points if it’s funny enough to make future-you smile), and choose the profile type you want to protect (Apps, Scripts, Device actions, etc.).&lt;/li>
&lt;li>On the Approvers page, select &lt;kbd>Add groups&lt;/kbd> and pick which group of admins will approve changes for this policy.
Important: You can’t exclude groups or get fancy with scoping here—it’s one group, one policy, all users.&lt;/li>
&lt;li>Review your settings, and add a &amp;lsquo;business justification&amp;rsquo; for the approver. Something like this;
&lt;img src="https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/CreatePolicy.png"
width="770"
height="655"
srcset="https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/CreatePolicy_hu_33e193bafc98ba56.png 480w, https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/CreatePolicy_hu_77960a514c7f29c4.png 1024w"
loading="lazy"
alt="Review Policy before submission"
class="gallery-image"
data-flex-grow="117"
data-flex-basis="282px"
>&lt;/li>
&lt;li>Then hit &lt;kbd>Submit for Approval&lt;/kbd>.&lt;/li>
&lt;/ol>
&lt;p>At this point, your shiny new policy is created, but it’s not live until it’s approved. You&amp;rsquo;ll see this under My Requests
&lt;img src="https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/RequireApproval.png"
width="1392"
height="240"
srcset="https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/RequireApproval_hu_a540ae7ea75066d1.png 480w, https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/RequireApproval_hu_b3ee82fbeec9fb7d.png 1024w"
loading="lazy"
alt="Pending Approval"
class="gallery-image"
data-flex-grow="580"
data-flex-basis="1392px"
>&lt;/p>
&lt;h3 id="approve-the-policy">Approve the Policy
&lt;/h3>&lt;ol>
&lt;li>Sign out of your first admin account and sign back in with a different admin account that’s either an GA, Intune Admin or has the permission Approve MAA within RBAC.&lt;/li>
&lt;li>Navigate to &lt;kbd>Tenant administration &amp;gt; Multi Admin Approval &amp;gt; All requests&lt;/kbd>.&lt;/li>
&lt;li>Find the pending request for your new access policy.
&lt;img src="https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/ApproveRequest.png"
width="1393"
height="234"
srcset="https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/ApproveRequest_hu_68a6efea9912e34f.png 480w, https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/ApproveRequest_hu_d54d842311840067.png 1024w"
loading="lazy"
alt="Approval Request"
class="gallery-image"
data-flex-grow="595"
data-flex-basis="1428px"
>&lt;/li>
&lt;li>Open it up, review the details (including the justification) and add in your &lt;/kbd>approver notes&lt;/kbd>. This is required&lt;/li>
&lt;li>Then hit &lt;kbd>Approve request&lt;/kbd> (or reject request if your future self is having second thoughts).
&lt;img src="https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/Approve.png"
width="1107"
height="863"
srcset="https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/Approve_hu_5f6fc4edfe408aef.png 480w, https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/Approve_hu_400fa6625be2610c.png 1024w"
loading="lazy"
alt="Approve"
class="gallery-image"
data-flex-grow="128"
data-flex-basis="307px"
>&lt;/li>
&lt;li>You&amp;rsquo;ll then see the policy as approved, if you refresh the page.
&lt;img src="https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/Approved.png"
width="1390"
height="75"
srcset="https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/Approved_hu_8d60c43b7b1005f5.png 480w, https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/Approved_hu_8faf5404ff873834.png 1024w"
loading="lazy"
alt="Approved"
class="gallery-image"
data-flex-grow="1853"
data-flex-basis="4448px"
>&lt;/li>
&lt;/ol>
&lt;h3 id="complete-the-policy">Complete the Policy
&lt;/h3>&lt;p>You would think, that&amp;rsquo;s it, right? No, it&amp;rsquo;s not! The first admin, now needs to complete the policy before it becomes live.&lt;/p>
&lt;ol>
&lt;li>Sign out of your second admin account and sign back in with the fist admin account.&lt;/li>
&lt;li>Navigate to &lt;kbd>Tenant administration &amp;gt; Multi Admin Approval &amp;gt; My requests&lt;/kbd>.&lt;/li>
&lt;li>You&amp;rsquo;ll see your new policy as approved
&lt;img src="https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/Approved2.png"
width="1381"
height="239"
srcset="https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/Approved2_hu_bb65b869589135f6.png 480w, https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/Approved2_hu_c9dd2aa9ca8fbe28.png 1024w"
loading="lazy"
alt="Approved for second admin"
class="gallery-image"
data-flex-grow="577"
data-flex-basis="1386px"
>&lt;/li>
&lt;li>Select the policy and select &lt;kbd>Complete request&lt;/kbd>.
&lt;img src="https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/CompleteRequest.png"
width="1114"
height="860"
srcset="https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/CompleteRequest_hu_57be83b57672af06.png 480w, https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/CompleteRequest_hu_cc3c6ff1cd8778ea.png 1024w"
loading="lazy"
alt="Complete Request"
class="gallery-image"
data-flex-grow="129"
data-flex-basis="310px"
>&lt;/li>
&lt;li>Now wait! It takes around 10 minutes in my testing for the policy be adopted and the action to be protected. You&amp;rsquo;ll know when it is as you&amp;rsquo;ll see a business justification field, when you try to carry out the protected action. If you don&amp;rsquo;t see it, it&amp;rsquo;s not live yet!&lt;/li>
&lt;/ol>
&lt;h3 id="what-does-it-look-like-in-action">What does it look like in action?
&lt;/h3>&lt;p>So you’ve got this far and set up your shiny new access policy. What actually happens when an admin tries to make a change that’s now protected? Let’s walk through it, no popcorn required.&lt;/p>
&lt;ol>
&lt;li>The Admin Makes a Change
Imagine an admin tries to wipe a device (or maybe deploy a script). Normally, that action would go straight through. But now, when they hit save, Intune steps in and says: “Hold on, explain yourself.” A Business justification box appears at the bottom of the screen. The admin types in why the change is needed—something like “User lost laptop on the train again” (we all know that person).
&lt;img src="https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/WipeAction.png"
width="770"
height="301"
srcset="https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/WipeAction_hu_10d518e328024a58.png 480w, https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/WipeAction_hu_cf52393055043887.png 1024w"
loading="lazy"
alt="Wipe Action"
class="gallery-image"
data-flex-grow="255"
data-flex-basis="613px"
>&lt;/li>
&lt;li>The Request Gets Parked
Instead of being processed immediately, the request now sits in limbo under My requests in the Intune admin center. The status will show as Needs approval.
&lt;img src="https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/DeviceActionPending.png"
width="1392"
height="238"
srcset="https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/DeviceActionPending_hu_9cadd5c1af1fddf5.png 480w, https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/DeviceActionPending_hu_e9b02058e7e9900f.png 1024w"
loading="lazy"
alt="Device Action Pending Approval"
class="gallery-image"
data-flex-grow="584"
data-flex-basis="1403px"
>&lt;/li>
&lt;li>The Approver Steps In
Another admin, one who’s in the designated approver group, logs into Intune and heads to &lt;kbd>Tenant administration &amp;gt; Multi Admin Approval &amp;gt; Received requests&lt;/kbd>.
They’ll see the pending request, complete with details of what action was attempted, who submitted it, and that all-important &amp;lsquo;business justification&amp;rsquo;.
&lt;img src="https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/DeviceActionPending2.png"
width="1112"
height="858"
srcset="https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/DeviceActionPending2_hu_7c9ad3ec5a813e1b.png 480w, https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/DeviceActionPending2_hu_ec52f276a87e33a5.png 1024w"
loading="lazy"
alt="Device Action Pending Approval for second admin"
class="gallery-image"
data-flex-grow="129"
data-flex-basis="311px"
>&lt;/li>
&lt;li>Decision Time
The approver can either hit Approve or Reject, and they’ve got a notes field to leave comments—helpful for feedback, or the occasional passive-aggressive remark like “Stop wiping devices on Friday afternoons.”&lt;/li>
&lt;li>The Requestor Finishes the Job
Here’s the twist: even after approval, the original requestor has to go back in and hit Complete before the action actually happens. This ensures the person who started the process is still in the loop. Once completed, the status updates to Completed, and Intune carries out the change.
&lt;img src="https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/DeviceActionApproved.png"
width="1116"
height="858"
srcset="https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/DeviceActionApproved_hu_7094bf7de9308339.png 480w, https://endpointmgt.com/p/multiappapproval/post/MultiAdminApproval/img/DeviceActionApproved_hu_9fad84d2e2edd9b1.png 1024w"
loading="lazy"
alt="Device Action Approved"
class="gallery-image"
data-flex-grow="130"
data-flex-basis="312px"
>&lt;/li>
&lt;li>Everyone Stays in the Loop
If the request is rejected, the notes from the approver are visible to the requestor, so they know why. Every step is logged in audit logs, so you’ve got the receipts if you need them later.&lt;/li>
&lt;/ol>
&lt;p>The whole process feels a bit like tagging in a teammate during a wrestling match, one person starts the move, but someone else has to back them up before it lands. It adds a couple of extra clicks, but in exchange, you’re massively reducing the risk of one compromised account (or one tired admin mis-click) causing chaos.&lt;/p>
&lt;h2 id="looking-ahead">Looking Ahead
&lt;/h2>&lt;p>Will Microsoft eventually let us scope approvals to specific groups or device types? One can hope. The ideal future is granular control: different approval paths for different admin roles, device ownership types, or even for high-risk vs. low-risk actions.&lt;/p>
&lt;p>Until then, MAA is a solid foundation. It might not be the dream scenario where your junior admin can reset a password but needs approval to delete a fleet of laptops—but it’s still a powerful safety net for every organization running Intune.&lt;/p>
&lt;p>And hey, if nothing else, it makes sure your admins are talking to each other. Who knew security could double up as team bonding?&lt;/p></description></item><item><title>Windows Hello for Business and Cloud Kerberos Authentication</title><link>https://endpointmgt.com/p/whfbcloudkerberos/</link><pubDate>Sat, 05 Jul 2025 16:56:34 +0100</pubDate><guid>https://endpointmgt.com/p/whfbcloudkerberos/</guid><description>&lt;img src="https://endpointmgt.com/p/whfbcloudkerberos/post/WHfBCloudKerberos/img/cover.png" alt="Featured image of post Windows Hello for Business and Cloud Kerberos Authentication" />&lt;p>I don&amp;rsquo;t know about you but as soon as you hear the word Kerberos, I immediately want to shy away. For it sounds complicated and scary but what is it? Well, in simple terms, it&amp;rsquo;s a modern authentication that can allow organisations to reduce the reliance on passwords on Windows devices.&lt;/p>
&lt;h2 id="why-might-you-need-it">Why might you need it?
&lt;/h2>&lt;p>Imagine a world where you&amp;rsquo;d like to have Entra ID /Azure AD joined devices, authenticating back to on-premise resources. As long as you have hybrid user identities sync&amp;rsquo;d via AD sync connect, you can have just that but what if you wish to make use of Windows Hello for Business? Then you&amp;rsquo;ll start to run into some problems and users will be prompted for re-authentication. Why, well the on-premise resources, don&amp;rsquo;t trust your WHfB authentication token. This is where Cloud Kerberos trust comes to aid. It allows for WHfB configured devices to access on-premise resources without re-authentication and provide a secure authentication trust between Entra ID and the on-premise AD.&lt;/p>
&lt;h3 id="alternatives">Alternatives
&lt;/h3>&lt;p>As with everything, in short Yes there are but I&amp;rsquo;d consider these older technology. You have the choice of using a key trust or certificate trust. With the later, even if you have your own PKI infrastructure, I still wouldn&amp;rsquo;t recommend it. It&amp;rsquo;s much harder to upkeep and to be honest, it&amp;rsquo;s a royal pain, comes with poor user experience (at step up stage) and doesn&amp;rsquo;t really offer anything else for the complexity that it brings. MIcrosoft themselves, recommend Cloud Kerberos Trust!&lt;/p>
&lt;h2 id="so-how-does-it-work">So how does it work?
&lt;/h2>&lt;h2 id="what-are-the-supported-scenarios">What are the supported scenarios?
&lt;/h2>&lt;p>So imagine, you&amp;rsquo;re moving to the cloud. Existing devices are hybrid domain joined. New pilot devices are Entra joined via Windows Autopilot and you&amp;rsquo;re slowly moving workloads over from on-premise. How does this fit? Well in short, it supports both. So you can deploy CKT, deploy one configuration to devices or users and it&amp;rsquo;ll, well just work!&lt;/p>
&lt;p>Devices do need support Windows Hello for business for all this to work but that comes down to the device. I&amp;rsquo;ll let you research this part!&lt;/p>
&lt;h2 id="how-to-deploy-it">How to deploy it&amp;hellip;
&lt;/h2>&lt;p>This comes in two parts, setting up the kerberos trust and deploying Windows Hello configuration. Do not deploy the Windows Hello configuration to devices or users, until the Cloud Kerberos configuration is in place. Doing so will mean that users will need to delete their WHfB and start again for it to take place.&lt;/p>
&lt;h3 id="set-up-cloud-kerberos-trust">Set up Cloud Kerberos Trust
&lt;/h3>&lt;p>Step 1 - First, ensure TLS 1.2 for PowerShell gallery access.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Powershell" data-lang="Powershell">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="no">Net.ServicePointManager&lt;/span>&lt;span class="p">]::&lt;/span>&lt;span class="n">SecurityProtocol&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="no">Net.ServicePointManager&lt;/span>&lt;span class="p">]::&lt;/span>&lt;span class="n">SecurityProtocol&lt;/span> &lt;span class="o">-bor&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="no">Net.SecurityProtocolType&lt;/span>&lt;span class="p">]::&lt;/span>&lt;span class="n">Tls12&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Step 2 - Install the AzureADHybridAuthenticationManagement PowerShell module.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Powershell" data-lang="Powershell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">Install-Module&lt;/span> &lt;span class="n">-Name&lt;/span> &lt;span class="n">AzureADHybridAuthenticationManagement&lt;/span> &lt;span class="n">-AllowClobber&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Step 3 - Create the new Entra ID Kerberos Server object in Active Directory&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Powershell" data-lang="Powershell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$GAUser&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;PlaceYourAdminCreds@tenantdomain.com&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">Set-AzureADKerberosServer&lt;/span> &lt;span class="n">-Domain&lt;/span> &lt;span class="nv">$env:UserDNSDomain&lt;/span> &lt;span class="n">-UserPrincipalName&lt;/span> &lt;span class="nv">$GAUser&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Step 4 - Now you&amp;rsquo;re done but lets verify it&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Powershell" data-lang="Powershell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">Get-AzureADKerberosServer&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>You should see something like this&amp;hellip;&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/whfbcloudkerberos/post/WHfBCloudKerberos/img/image-1.png"
width="634"
height="247"
srcset="https://endpointmgt.com/p/whfbcloudkerberos/post/WHfBCloudKerberos/img/image-1_hu_ae1793da91e2ee15.png 480w, https://endpointmgt.com/p/whfbcloudkerberos/post/WHfBCloudKerberos/img/image-1_hu_dbabff089f7430e4.png 1024w"
loading="lazy"
alt="Confirmation of Deployment"
class="gallery-image"
data-flex-grow="256"
data-flex-basis="616px"
>&lt;/p>
&lt;p>If you look on a domain controller within Users and Computer, you should see 2 new objects created. These act like a read only domain controller. They provide the mechanism to provide part of the Primary Refresh Token (PRT) that users need to authenticate.&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/whfbcloudkerberos/post/WHfBCloudKerberos/img/image-2.png"
width="1067"
height="458"
srcset="https://endpointmgt.com/p/whfbcloudkerberos/post/WHfBCloudKerberos/img/image-2_hu_7f38e7b8a60996a2.png 480w, https://endpointmgt.com/p/whfbcloudkerberos/post/WHfBCloudKerberos/img/image-2_hu_78f8083b93c34bab.png 1024w"
loading="lazy"
alt="Disabled User Object"
class="gallery-image"
data-flex-grow="232"
data-flex-basis="559px"
>&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/whfbcloudkerberos/post/WHfBCloudKerberos/img/image-3.png"
width="1066"
height="456"
srcset="https://endpointmgt.com/p/whfbcloudkerberos/post/WHfBCloudKerberos/img/image-3_hu_ea96e62b04f96767.png 480w, https://endpointmgt.com/p/whfbcloudkerberos/post/WHfBCloudKerberos/img/image-3_hu_57d8cde087d09b23.png 1024w"
loading="lazy"
alt="Enabled Device Object"
class="gallery-image"
data-flex-grow="233"
data-flex-basis="561px"
>&lt;/p>
&lt;blockquote>
&lt;p>Do not delete/move/rename these 2 objects. To do so will break your new Cloud Kerberos Trust!&lt;/p>&lt;/blockquote>
&lt;h3 id="intune-configuration">Intune Configuration
&lt;/h3>&lt;ol>
&lt;li>Create Windows Hello for Business Configuration Profile&lt;/li>
&lt;/ol>
&lt;p>Now it&amp;rsquo;s time to create and deploy the WHfB configuration. Here is an example settings catalog profile to deploy WHfB will all the necessary settings. Make amendments as you see fit, the important one is highlighted in yellow. Use Cloud Trust for on prem auth, just make sure that&amp;rsquo;s enabled!&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/whfbcloudkerberos/post/WHfBCloudKerberos/img/image-4.png"
width="615"
height="831"
srcset="https://endpointmgt.com/p/whfbcloudkerberos/post/WHfBCloudKerberos/img/image-4_hu_108596622b126fff.png 480w, https://endpointmgt.com/p/whfbcloudkerberos/post/WHfBCloudKerberos/img/image-4_hu_6b3a4b389ec56f9d.png 1024w"
loading="lazy"
alt="Enabled Device Object"
class="gallery-image"
data-flex-grow="74"
data-flex-basis="177px"
>&lt;/p>
&lt;ol start="2">
&lt;li>Deploy it to users or devices. Once the user logs back into the device, they should receive a message to setup Windows Hello.&lt;/li>
&lt;/ol>
&lt;h3 id="user-setup">User Setup
&lt;/h3>&lt;p>This works in the exactly the same way as it would without kerberos trust so the user won&amp;rsquo;t notice anything different. They sign in, go through the MFA Prompt and setup faceID, fingerprintID and then a PIN code. Once set, they&amp;rsquo;ll be logged in and WHfB will be the new default sign in option.&lt;/p>
&lt;blockquote>
&lt;p>This is one of the biggest benefits of using this method. Whereas using a key trust or certificate trust, means that when a user sets up for the first time, they can&amp;rsquo;t immediately start using it, they have to wait upwards of 60 mins for the device objects in Active Directory to be updated. Not the case with Cloud Kerberos Trust. Use it straight away!&lt;/p>&lt;/blockquote>
&lt;h2 id="user-experience">User Experience.
&lt;/h2>&lt;p>I&amp;rsquo;m not going to give you a screen shot of the setup process or accessing on premise file shares. As long as the user has line of sight to the file share, to test Cloud Kerberos, have them sign in with WHfB on the device and access a file share. If it just opens, success! If it prompts for a username/password, we have problems! I&amp;rsquo;d run the &lt;code>Get-AzureADKerberosServer&lt;/code> to check the status.&lt;/p>
&lt;p>Thanks for reading!&lt;/p></description></item><item><title>Deploy SOLUS 3 for SIMS</title><link>https://endpointmgt.com/p/deploysims/</link><pubDate>Wed, 29 Jan 2025 19:45:32 +0100</pubDate><guid>https://endpointmgt.com/p/deploysims/</guid><description>&lt;img src="https://endpointmgt.com/p/deploysims/post/InstallSims/img/cover.png" alt="Featured image of post Deploy SOLUS 3 for SIMS" />&lt;p>On a recent engagement in my day job, I had a challenge to deploy Solus3 agent to Microsoft Entra joined devices. These devices were enrolled via Windows Autopilot and no longer domain joined. The existing deployment deployed the Solus3 agent via a targeted AD OU, which deploys the agent via the deployment server. This of course, isn’t possible with Entra joined devices.&lt;/p>
&lt;p>To get this to work, its a wrap within a wrap. Keeping it as close the production or what your using or how you might already deploy the app as close the the existing deployment but with a few tweaks. Anyways for now, here are the steps to deploy the agent via Microsoft Intune. After all, it’s why you’re here 🙂&lt;/p>
&lt;blockquote>
&lt;p>It should be noted that this approach to deployment is NOT supported. Do so at your own risk. You may still need to keep an instance of a supported deployment. This will allow you to replicate the any issue on a supported deployment for escalation.&lt;/p>&lt;/blockquote>
&lt;h2 id="preparation">Preparation
&lt;/h2>&lt;p>You’ll need to gather the relevant files and create a folder for the install files, called SIMS. In my example, I’ve placed the SIMS folder on the root of the D:\ drive. Copy the following files over to the SIMS folder.&lt;/p>
&lt;ul>
&lt;li>SOLUS3AgentInstaller_x86.msi&lt;/li>
&lt;li>SOLUS3AgentInstaller_x64.msi&lt;/li>
&lt;li>Solus3.Keys.DeploymentService.Public.xml&lt;/li>
&lt;/ul>
&lt;h3 id="first-installer-file">First installer File
&lt;/h3>&lt;p>Create a .bat file named Solus3AgentInstaller.bat with the following commands.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Powershell" data-lang="Powershell">&lt;span class="line">&lt;span class="cl">&lt;span class="n">cscript&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">exe&lt;/span> &lt;span class="p">//&lt;/span>&lt;span class="n">nologo&lt;/span> &lt;span class="n">AgentInstaller&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">js&lt;/span> &lt;span class="s2">&amp;#34;agent_installer.log&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;net.tcp://localhost:52966&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;net.tcp://Your-SIMS-Server:52965&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;Solus3.Keys.DeploymentService.Public.xml&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;SOLUS3AgentInstaller_x86.msi&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;SOLUS3AgentInstaller_x64.msi&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Update the &lt;code>net.tcp://Your-SIMS-Server:52965&lt;/code> with your server location and save the .bat file in your newly created SIMS folder.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="err">var&lt;/span> &lt;span class="err">wshShell,&lt;/span> &lt;span class="err">wshSysEnv;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">var&lt;/span> &lt;span class="err">fso,&lt;/span> &lt;span class="err">f&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="err">,&lt;/span> &lt;span class="err">typeLib;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">fso&lt;/span> &lt;span class="err">=&lt;/span> &lt;span class="err">new&lt;/span> &lt;span class="err">ActiveXObject(&lt;/span>&lt;span class="s2">&amp;#34;Scripting.FileSystemObject&amp;#34;&lt;/span>&lt;span class="err">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">typeLib&lt;/span> &lt;span class="err">=&lt;/span> &lt;span class="err">new&lt;/span> &lt;span class="err">ActiveXObject(&lt;/span>&lt;span class="s2">&amp;#34;Scriptlet.TypeLib&amp;#34;&lt;/span>&lt;span class="err">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">wshShell&lt;/span> &lt;span class="err">=&lt;/span> &lt;span class="err">WScript.CreateObject(&lt;/span>&lt;span class="s2">&amp;#34;WScript.Shell&amp;#34;&lt;/span>&lt;span class="err">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">var&lt;/span> &lt;span class="err">logFileName&lt;/span> &lt;span class="err">=&lt;/span> &lt;span class="err">WScript.Arguments(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="err">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">var&lt;/span> &lt;span class="err">agentAddress&lt;/span> &lt;span class="err">=&lt;/span> &lt;span class="err">WScript.Arguments(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="err">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">var&lt;/span> &lt;span class="err">dsAddress&lt;/span> &lt;span class="err">=&lt;/span> &lt;span class="err">WScript.Arguments(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="err">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">var&lt;/span> &lt;span class="err">keyFileName&lt;/span> &lt;span class="err">=&lt;/span> &lt;span class="err">WScript.Arguments(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="err">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">var&lt;/span> &lt;span class="err">msi&lt;/span>&lt;span class="mi">32&lt;/span> &lt;span class="err">=&lt;/span> &lt;span class="err">WScript.Arguments(&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="err">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">var&lt;/span> &lt;span class="err">msi&lt;/span>&lt;span class="mi">64&lt;/span> &lt;span class="err">=&lt;/span> &lt;span class="err">WScript.Arguments(&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="err">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">var&lt;/span> &lt;span class="err">msi&lt;/span> &lt;span class="err">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="err">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">if&lt;/span> &lt;span class="err">(is&lt;/span>&lt;span class="mi">64&lt;/span>&lt;span class="err">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">msi&lt;/span> &lt;span class="err">=&lt;/span> &lt;span class="err">msi&lt;/span>&lt;span class="mi">64&lt;/span>&lt;span class="err">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">msi&lt;/span> &lt;span class="err">=&lt;/span> &lt;span class="err">msi&lt;/span>&lt;span class="mi">32&lt;/span>&lt;span class="err">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">wshShell.Run(&lt;/span>&lt;span class="s2">&amp;#34;msiexec.exe /qb /lv* \&amp;#34;&amp;#34;&lt;/span> &lt;span class="err">+&lt;/span> &lt;span class="err">fso.BuildPath(wshShell.Environment(&lt;/span>&lt;span class="s2">&amp;#34;SYSTEM&amp;#34;&lt;/span>&lt;span class="err">)(&lt;/span>&lt;span class="s2">&amp;#34;TEMP&amp;#34;&lt;/span>&lt;span class="err">),&lt;/span> &lt;span class="err">logFileName)&lt;/span> &lt;span class="err">+&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;\&amp;#34; /i \&amp;#34;&amp;#34;&lt;/span> &lt;span class="err">+&lt;/span> &lt;span class="err">wshShell.CurrentDirectory&lt;/span> &lt;span class="err">+&lt;/span> &lt;span class="s2">&amp;#34;\\&amp;#34;&lt;/span> &lt;span class="err">+&lt;/span> &lt;span class="err">msi&lt;/span> &lt;span class="err">+&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;\&amp;#34; AGENTSERVICEADDRESS=\&amp;#34;&amp;#34;&lt;/span> &lt;span class="err">+&lt;/span> &lt;span class="err">agentAddress&lt;/span> &lt;span class="err">+&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;\&amp;#34; AGENTID=\&amp;#34;&amp;#34;&lt;/span> &lt;span class="err">+&lt;/span> &lt;span class="err">typeLib.Guid.toString().substring(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="err">,&lt;/span> &lt;span class="mi">38&lt;/span>&lt;span class="err">)&lt;/span> &lt;span class="err">+&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;\&amp;#34; DEPLOYMENTSERVERADDRESS=\&amp;#34;&amp;#34;&lt;/span> &lt;span class="err">+&lt;/span> &lt;span class="err">dsAddress&lt;/span> &lt;span class="err">+&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;\&amp;#34; RSAKEYPATH=\&amp;#34;&amp;#34;&lt;/span> &lt;span class="err">+&lt;/span> &lt;span class="err">wshShell.CurrentDirectory&lt;/span> &lt;span class="err">+&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//&amp;#34;\&amp;#34; PREDEFINEDAGENTTARGETS=\&amp;#34;Sims Fms Discover&amp;#34; +
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="s2">&amp;#34;\&amp;#34;&amp;#34;&lt;/span>&lt;span class="err">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="err">,&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="err">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">function&lt;/span> &lt;span class="err">is&lt;/span>&lt;span class="mi">64&lt;/span>&lt;span class="err">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">var&lt;/span> &lt;span class="err">shell&lt;/span> &lt;span class="err">=&lt;/span> &lt;span class="err">WScript.CreateObject(&lt;/span>&lt;span class="nt">&amp;#34;WScript.Shell&amp;#34;&lt;/span>&lt;span class="err">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">return&lt;/span> &lt;span class="err">(wshShell.Environment(&lt;/span>&lt;span class="s2">&amp;#34;SYSTEM&amp;#34;&lt;/span>&lt;span class="err">)(&lt;/span>&lt;span class="s2">&amp;#34;PROCESSOR_ARCHITECTURE&amp;#34;&lt;/span>&lt;span class="err">).indexOf(&lt;/span>&lt;span class="s2">&amp;#34;64&amp;#34;&lt;/span>&lt;span class="err">)&lt;/span> &lt;span class="err">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="err">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Save the AgentInstaller.js file in your newly created SIMS folder. Your folder should then look something like this.&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/deploysims/post/InstallSims/img/image-1.png"
width="258"
height="193"
srcset="https://endpointmgt.com/p/deploysims/post/InstallSims/img/image-1_hu_714b8f17d5165d8.png 480w, https://endpointmgt.com/p/deploysims/post/InstallSims/img/image-1_hu_7d36794359e03b2d.png 1024w"
loading="lazy"
alt="Install Files"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;h3 id="wrapping-time">Wrapping Time
&lt;/h3>&lt;p>I’ll assume you already know how to wrap packages via &lt;a class="link" href="https://go.microsoft.com/fwlink/?linkid=2065730" title="Microsoft Win32 Content Prep Tool"
target="_blank" rel="noopener"
>Microsoft Win32 Content Prep Tool&lt;/a>. Packing the content should look something like this…&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/deploysims/post/InstallSims/img/image-2.png"
width="588"
height="116"
srcset="https://endpointmgt.com/p/deploysims/post/InstallSims/img/image-2_hu_16981aeaf4d9b128.png 480w, https://endpointmgt.com/p/deploysims/post/InstallSims/img/image-2_hu_db19ccb101e49673.png 1024w"
loading="lazy"
alt="Microsoft Win32 Content Prep Tool"
class="gallery-image"
data-flex-grow="506"
data-flex-basis="1216px"
>&lt;/p>
&lt;h3 id="upload-time">Upload Time
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">Install Command: Solus3AgentInstaller.bat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Uninstall Command: msiexec.exe /qn /x {PRODUCT-CODE} /lv* “%TEMP%\uninstall.log”
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Install behavior: System
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>It should look like this…&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/deploysims/post/InstallSims/img/image-3.png"
width="774"
height="547"
srcset="https://endpointmgt.com/p/deploysims/post/InstallSims/img/image-3_hu_fb06c62835fc2f13.png 480w, https://endpointmgt.com/p/deploysims/post/InstallSims/img/image-3_hu_710ebfdafacb3a9f.png 1024w"
loading="lazy"
alt="Microsoft Intune Install Commands"
class="gallery-image"
data-flex-grow="141"
data-flex-basis="339px"
>&lt;/p>
&lt;p>For the detection, we’ll use a file installed as part of the installer&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">Rule Type: File
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Path: C:\Program Files\SOLUS3\AgentService
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">File or Folder: Infrastructure.dll
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Detection Method: File or folder exists
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Associated with a 32-bit app on 64-bit clients: No
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>It should look like this…&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/deploysims/post/InstallSims/img/image-4.png"
width="557"
height="234"
srcset="https://endpointmgt.com/p/deploysims/post/InstallSims/img/image-4_hu_702b8cb870cf949e.png 480w, https://endpointmgt.com/p/deploysims/post/InstallSims/img/image-4_hu_81c8af9430ed1e0a.png 1024w"
loading="lazy"
alt="Microsoft Intune App Detection"
class="gallery-image"
data-flex-grow="238"
data-flex-basis="571px"
>&lt;/p>
&lt;h2 id="deployment-time">Deployment Time
&lt;/h2>&lt;p>Assign your newly created and updated app to users or devices as you desire.&lt;/p>
&lt;h3 id="success">Success?
&lt;/h3>&lt;p>You should now have the app installed.&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/deploysims/post/InstallSims/img/image-5.png"
width="962"
height="540"
srcset="https://endpointmgt.com/p/deploysims/post/InstallSims/img/image-5_hu_f1053157cd39505b.png 480w, https://endpointmgt.com/p/deploysims/post/InstallSims/img/image-5_hu_fba00775511b1d98.png 1024w"
loading="lazy"
alt="Installation Success"
class="gallery-image"
data-flex-grow="178"
data-flex-basis="427px"
>&lt;/p>
&lt;h2 id="next-steps">Next Steps.
&lt;/h2>&lt;p>Now that you have the Agent installed. You’ll need to login to the Solus3 server and deploy the Sims package to the device from the deployment server.&lt;/p>
&lt;blockquote>
&lt;p>While this will deploy the Solus3 agent to devices, what this doesn’t take care of is ongoing updates. You’ll need to package any updates to the Solus3 agent. It’s beyond the scope of this article.&lt;/p>&lt;/blockquote>
&lt;p>For now and until the next post, I wish you well…&lt;/p></description></item><item><title>Missing Microsoft Enrolment App</title><link>https://endpointmgt.com/p/recreateenrolmentapp/</link><pubDate>Mon, 22 Jan 2024 10:59:19 +0100</pubDate><guid>https://endpointmgt.com/p/recreateenrolmentapp/</guid><description>&lt;img src="https://endpointmgt.com/p/recreateenrolmentapp/post/MissingEnrolmentApp/img/cover.png" alt="Featured image of post Missing Microsoft Enrolment App" />&lt;p>Missing this app in your M365 tenant and need it for Conditional Access? This was a recent issue that I came across while working on a tenant to tenant migration project. The Issue? Re-enrolling fully managed (COPE) devices and the requirement to exclude the enrollment from MFA prompts. The only problem, only the Microsoft Intune app existed.&lt;/p>
&lt;p>As you can see below, the Microsoft Intune app is missing from the Mobility MDM and WIP page.&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/recreateenrolmentapp/post/MissingEnrolmentApp/img/image-1.png"
width="474"
height="223"
srcset="https://endpointmgt.com/p/recreateenrolmentapp/post/MissingEnrolmentApp/img/image-1_hu_869cafa68da317a3.png 480w, https://endpointmgt.com/p/recreateenrolmentapp/post/MissingEnrolmentApp/img/image-1_hu_612badd42150d4b8.png 1024w"
loading="lazy"
alt="Missing Enrolment App"
class="gallery-image"
data-flex-grow="212"
data-flex-basis="510px"
>&lt;/p>
&lt;p>As you can also see, it’s missing from the Target Resources within the Conditional Access Policies.&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/recreateenrolmentapp/post/MissingEnrolmentApp/img/image-2.png"
width="889"
height="569"
srcset="https://endpointmgt.com/p/recreateenrolmentapp/post/MissingEnrolmentApp/img/image-2_hu_5ffe9ca43b702b6c.png 480w, https://endpointmgt.com/p/recreateenrolmentapp/post/MissingEnrolmentApp/img/image-2_hu_aee2aa3ac4b62fe9.png 1024w"
loading="lazy"
alt="Conditional Access Selection"
class="gallery-image"
data-flex-grow="156"
data-flex-basis="374px"
>&lt;/p>
&lt;p>To resolve the issue, we need a way of recreating the app that Microsoft will recognise as the Intune enrolment app, we can’t simply create an Enterprise Application called the same name. We’ll do this by creating a new Service Principle.&lt;/p>
&lt;p>First, we’re going to login to Entra ID using Powershell.&lt;/p>
&lt;p>&lt;code>Connect-AzureAD&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/recreateenrolmentapp/post/MissingEnrolmentApp/img/image-3.png"
width="951"
height="211"
srcset="https://endpointmgt.com/p/recreateenrolmentapp/post/MissingEnrolmentApp/img/image-3_hu_acbe48cc74e1b086.png 480w, https://endpointmgt.com/p/recreateenrolmentapp/post/MissingEnrolmentApp/img/image-3_hu_e87d245b4b6bb559.png 1024w"
loading="lazy"
alt="Connect to Entra"
class="gallery-image"
data-flex-grow="450"
data-flex-basis="1081px"
>&lt;/p>
&lt;p>Lets now check if the app exists, run the get command to see if it exists.&lt;/p>
&lt;p>&lt;code>Get-AzureADServicePrincipal -AppId d4ebce55-015a-49b5-a083-c84d1797ae8c&lt;/code>&lt;/p>
&lt;p>If it returned nothing back and simply returned back to a new command line, then we need to create the app. We’ll first clear any record of it from the tenant by removing the SP.&lt;/p>
&lt;p>&lt;code>Remove-AzureADServicePrincipal -AppId d4ebce55-015a-49b5-a083-c84d1797ae8c&lt;/code>&lt;/p>
&lt;p>Once complete, we’re now going to recreate it. Don’t make any changes to the command.&lt;/p>
&lt;p>&lt;code>New-AzureADServicePrincipal -AppId d4ebce55-015a-49b5-a083-c84d1797ae8c&lt;/code>&lt;/p>
&lt;p>To confirm it’s created, PS will show you the new Service Principle with the correct display name of the require Intune enrollment app.&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/recreateenrolmentapp/post/MissingEnrolmentApp/img/image-4.png"
width="975"
height="205"
srcset="https://endpointmgt.com/p/recreateenrolmentapp/post/MissingEnrolmentApp/img/image-4_hu_ba846775bc50c6a4.png 480w, https://endpointmgt.com/p/recreateenrolmentapp/post/MissingEnrolmentApp/img/image-4_hu_ef115481583cc253.png 1024w"
loading="lazy"
alt="Create Entra Service Principal"
class="gallery-image"
data-flex-grow="475"
data-flex-basis="1141px"
>&lt;/p>
&lt;p>We can now also see the app listed in the Mobility page&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/recreateenrolmentapp/post/MissingEnrolmentApp/img/image-5.png"
width="458"
height="267"
srcset="https://endpointmgt.com/p/recreateenrolmentapp/post/MissingEnrolmentApp/img/image-5_hu_856a55f12f637a6d.png 480w, https://endpointmgt.com/p/recreateenrolmentapp/post/MissingEnrolmentApp/img/image-5_hu_8ac63a3820a18508.png 1024w"
loading="lazy"
alt="Mobility Page"
class="gallery-image"
data-flex-grow="171"
data-flex-basis="411px"
>&lt;/p>
&lt;p>And, if you now select the app from the CA policy, it should be listed. You’ll need to refresh the page if you still have it open from checking previously.&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/recreateenrolmentapp/post/MissingEnrolmentApp/img/image-6.png"
width="900"
height="568"
srcset="https://endpointmgt.com/p/recreateenrolmentapp/post/MissingEnrolmentApp/img/image-6_hu_6059c9c680b98f4d.png 480w, https://endpointmgt.com/p/recreateenrolmentapp/post/MissingEnrolmentApp/img/image-6_hu_cff216257318c3cd.png 1024w"
loading="lazy"
alt="Updated Conditional Access Selection"
class="gallery-image"
data-flex-grow="158"
data-flex-basis="380px"
>&lt;/p>
&lt;p>And your done. Now all you have to do is save your CA policy and test the results.&lt;/p></description></item><item><title>MAM for Windows</title><link>https://endpointmgt.com/p/mamforwindows/</link><pubDate>Fri, 13 Oct 2023 11:18:38 +0100</pubDate><guid>https://endpointmgt.com/p/mamforwindows/</guid><description>&lt;img src="https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/cover.png" alt="Featured image of post MAM for Windows" />&lt;p>Today we’re going to take a quick look at, MAM for Windows. But what is it? MAM stands for Mobile Application Protection and Windows, instead a mobile OS, so what does Microsoft mean when they say MAM for Windows? Well, it’s in essence, it’s App Protection for Windows. It applies to the Edge Browser and can provide organisations with the ability to provide their end users with secure M365 access on personally owned unmanaged devices while applying some level of data protection controls.&lt;/p>
&lt;p>So we know what is it but how does it work? If all the requirements are met, once setup, the user just has to sign in to Office and they’ll be taken through the process and well apart from one slightly misleading screen where it could all come crashing down, more on that later, it’s a fairly easy process for users to follow and makes accessing M365 almost easier.&lt;/p>
&lt;p>We’ll take a look at&lt;/p>
&lt;ol>
&lt;li>The prerequisites&lt;/li>
&lt;li>The users experience both in setup and use&lt;/li>
&lt;li>The configuration from an Intune Admins perspective&lt;/li>
&lt;li>What else did we see?&lt;/li>
&lt;li>What didn’t we see that we maybe expected?&lt;/li>
&lt;/ol>
&lt;h2 id="what-are-the-prerequisites">What are the prerequisites…
&lt;/h2>&lt;p>If you look at the Microsoft tech announcement, it will told us that it’s Windows 11 and Microsoft Edge for Windows ver. 117 and above. With the updated learn article Data protection for Windows MAM | Microsoft Learn, this was changed to support Windows 10 running build 19046.3636 and above with KB5031445 or later.&lt;/p>
&lt;ul>
&lt;li>Windows 10, build 19046.3636, KB5031445 or later and Windows 11, build 10.0.22621.2506, KB5031455 (22H2) or later&lt;/li>
&lt;li>Microsoft Intune (2309 release)&lt;/li>
&lt;li>Microsoft Edge (v117 stable branch and later for Windows 11 and v118.0.2088.71 and later for Windows 11)&lt;/li>
&lt;li>Windows Security Center (v 1.0.2310.2002 and later) if using Device Risk scores&lt;/li>
&lt;li>Users must be assigned a licence for Microsoft Intune and a Conditional Access P1 or P2 licence.&lt;/li>
&lt;/ul>
&lt;h2 id="the-setup">The Setup…
&lt;/h2>&lt;p>The first thing users will see when they sign in is a conditional access message saying that they’ll need to sign into the Edge Browser or access the account from a registered device. (we’ll not get into the later, you never know, I may do another post on this separately).&lt;/p>
&lt;p>Here’s a quick step by step run though of what it looks like for the user&lt;/p>
&lt;ol>
&lt;li>they’ll sign into Office.com with their organisational account&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-1.png"
width="458"
height="552"
srcset="https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-1_hu_953003221c6a40bd.png 480w, https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-1_hu_d8d2f0e91dc73d38.png 1024w"
loading="lazy"
alt="Sign In"
class="gallery-image"
data-flex-grow="82"
data-flex-basis="199px"
>&lt;/p>
&lt;ol start="2">
&lt;li>User will be asked to create a work profile, they simply need to select the account and select the Sign in to Sync data and they’ll then be prompted for their password.&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-2.png"
width="422"
height="334"
srcset="https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-2_hu_f92270e90e1f1192.png 480w, https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-2_hu_2c17b66274e5940f.png 1024w"
loading="lazy"
alt="Continue with Work Account"
class="gallery-image"
data-flex-grow="126"
data-flex-basis="303px"
>&lt;/p>
&lt;ol start="4">
&lt;li>This is where it gets interesting, the user is provided with a a couple of options on this screen. We need them to register the device but not enrol and allow the organisation to manage the device. Managed devices will block MAM for Windows from working so the user has to untick Allow my organisation to manage my device and then select OK.&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>they only sign into the app by selecting No, this won’t register the device and they’ll get stuck in a loop with MS Edge asking them to sign in and create a work profile. You have been warned.&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-4.png"
width="657"
height="642"
srcset="https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-4_hu_611e43e7059e56e7.png 480w, https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-4_hu_936a2f64380962ae.png 1024w"
loading="lazy"
alt="Management selection"
class="gallery-image"
data-flex-grow="102"
data-flex-basis="245px"
>&lt;/p>
&lt;ol start="5">
&lt;li>Once signed in, the work profile will be created, a couple of customisation screens will appear, they can tailor the browser or simply just click Continue, Next and Done.&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-5.png"
width="768"
height="480"
srcset="https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-5_hu_14f8a1a0c70bb770.png 480w, https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-5_hu_85991f7aa4389f4b.png 1024w"
loading="lazy"
alt="Edge Setup"
class="gallery-image"
data-flex-grow="160"
data-flex-basis="384px"
>&lt;/p>
&lt;p>And its done. A user will now have SSO when they use the Microsoft Edge browser using the newly created Work Profile.&lt;/p>
&lt;h2 id="in-practice">In Practice…
&lt;/h2>&lt;p>Here’s the subtle difference between the Personal and Work profiles signed in and how you can select between the two.&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-6.png"
width="333"
height="434"
srcset="https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-6_hu_2d962003016a4bf0.png 480w, https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-6_hu_a728a6f923af8bd6.png 1024w"
loading="lazy"
alt="Work Profile"
class="gallery-image"
data-flex-grow="76"
data-flex-basis="184px"
>, &lt;img src="https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-7.png"
width="249"
height="300"
srcset="https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-7_hu_7006beb43c0e71f7.png 480w, https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-7_hu_7d4ccb0a3c67ea1.png 1024w"
loading="lazy"
alt="Personal Profile"
class="gallery-image"
data-flex-grow="83"
data-flex-basis="199px"
>&lt;/p>
&lt;p>Trying to download files from OneDrive / SharePoint is blocked (as per our requirement) along with the ability to download the Office installer, rather unexpectedly but when you think about it logically, you can understand why.&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-8.png"
width="522"
height="260"
srcset="https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-8_hu_3547d76b4ba2d91c.png 480w, https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-8_hu_8f156c19a6e7e243.png 1024w"
loading="lazy"
alt="Prevented Action"
class="gallery-image"
data-flex-grow="200"
data-flex-basis="481px"
>, &lt;img src="https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-9.png"
width="768"
height="543"
srcset="https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-9_hu_970620adb18ad2d9.png 480w, https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-9_hu_8202c686e578537f.png 1024w"
loading="lazy"
alt="Blocked Download"
class="gallery-image"
data-flex-grow="141"
data-flex-basis="339px"
>&lt;/p>
&lt;h2 id="how-was-it-configured">How was it configured…
&lt;/h2>&lt;p>Configuration is carried out in 2 parts. You first have to great an App Protection Policy, followed by a Conditional Access Policy to enforce it.&lt;/p>
&lt;h3 id="app-protection">App Protection
&lt;/h3>&lt;p>The App Protection Policy is created within Intune here – Apps – Microsoft Intune admin center and you’ll need the role of Intune Admin or Global Admin (GA) to create this policy. The policy is broken down into 2 areas;&lt;/p>
&lt;ol>
&lt;li>Data protection&lt;/li>
&lt;li>Health Checks (otherwise known as Conditional Launch)&lt;/li>
&lt;/ol>
&lt;p>Data Protection allows admins to select where the managed profile can receive data from, send and receive organisational data, whether to allow cut, copy and past and decide if users can print organisational data.&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-10.png"
width="361"
height="109"
srcset="https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-10_hu_c25379205e1e5444.png 480w, https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-10_hu_ac8a220fd6a61188.png 1024w"
loading="lazy"
alt="App Protection - Data Controls"
class="gallery-image"
data-flex-grow="331"
data-flex-basis="794px"
>&lt;/p>
&lt;p>Health Checks allow admins to set criteria that must be met before a user can access M365 data via the work profile, such as Minimum OS, Minimum Edge version and id their account is disabled. It can also use the devices risk score from Microsoft Defender for Endpoint if used to secure unmanaged devices. (we’ll not cover this aspect here)&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-11.png"
width="744"
height="183"
srcset="https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-11_hu_99d87d3958c37f69.png 480w, https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-11_hu_86b584689ed4722b.png 1024w"
loading="lazy"
alt="App Protection - Health Check"
class="gallery-image"
data-flex-grow="406"
data-flex-basis="975px"
>&lt;/p>
&lt;p>Once the App Protection Policy is configured, it would be prevalent to assign this to a test group of users before deploying this to production.&lt;/p>
&lt;h3 id="conditional-access">Conditional Access
&lt;/h3>&lt;p>The Conditional Access Policy is created within Intune or Entra ID – Conditional Access – Microsoft Intune admin center and you’ll need the role of Conditional Access Admin or Global Admin (GA) to create this policy.&lt;/p>
&lt;p>This article isn’t designed to teach you how to use CA policies, if you are unfamiliar with these, improve your knowledge here – What is Conditional Access in Microsoft Entra ID? | Microsoft Learn&lt;/p>
&lt;p>Below is the policy that I created, targeting O365 apps, on windows, via a browser to require app protection. My policy did not follow the Microsoft guidance to either require app protection or require a compliant device. Consider your use case carefully.&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-12.png"
width="979"
height="524"
srcset="https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-12_hu_677f5112a237e6d.png 480w, https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-12_hu_3dc92ed06052052c.png 1024w"
loading="lazy"
alt="Conditional Access"
class="gallery-image"
data-flex-grow="186"
data-flex-basis="448px"
>&lt;/p>
&lt;h3 id="what-else-did-we-see">What else did we see…
&lt;/h3>&lt;p>An interesting one here, the Minimum OS was originally set to block older OS but regardless of the version of OS, I found that it always blocked it, even if the OS version was higher. As you can see from below, I changed this to warn so that I could continue but it’s still complaining, despite the Windows version being equal.&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-13.png"
width="809"
height="289"
srcset="https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-13_hu_73bb682e73dccd0.png 480w, https://endpointmgt.com/p/mamforwindows/post/MamForWindows/Img/image-13_hu_6ab0dcb91702e4f5.png 1024w"
loading="lazy"
alt="App Protection Health Check in action"
class="gallery-image"
data-flex-grow="279"
data-flex-basis="671px"
>&lt;/p>
&lt;h3 id="what-didnt-see-see-or-would-like">What didn’t see see or would like
&lt;/h3>&lt;p>For me, it’s around 2 aspects.&lt;/p>
&lt;p>The user setup process is confusing that users have to untick the box or face having their device managed. This could be must tidier if Microsoft revised this part of the process.&lt;/p>
&lt;p>The second is around the app protection policy with there being no access requirements that you get on both iOS and Android App Protection Policies. This means that admins can’t set a PIN or password requirement for users. This missing feature alone may rule out this being a viable option for some organisations.&lt;/p>
&lt;h3 id="further-info">Further Info
&lt;/h3>&lt;p>Here’s the official docs from Microsoft&lt;/p>
&lt;ul>
&lt;li>Data protection for Windows MAM | Microsoft Learn&lt;/li>
&lt;li>Frequently asked questions about MAM and app protection | Microsoft Learn&lt;/li>
&lt;li>Conditional Access – Require app protection policy for Windows | Microsoft Learn&lt;/li>
&lt;/ul></description></item><item><title>Company Portal Set up</title><link>https://endpointmgt.com/p/companyportal/</link><pubDate>Tue, 22 Nov 2022 14:40:57 +0100</pubDate><guid>https://endpointmgt.com/p/companyportal/</guid><description>&lt;img src="https://endpointmgt.com/p/companyportal/post/CompanyPortal/img/cover.png" alt="Featured image of post Company Portal Set up" />&lt;p>If you’re in a Hybrid environment using SCCM and Intune already or in the process of moving to a Hybrid deployment, a decision that will need to be made is where you direct users to install applications.&lt;/p>
&lt;p>Many of you may have already deployed the company portal but in this post; I’ll look at the benefits of deploying company portal to Windows devices, how to deploy it to devices, what’s visible within Company Portal and what the user experience is.&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/companyportal/post/CompanyPortal/img/image-1.png"
width="720"
height="451"
srcset="https://endpointmgt.com/p/companyportal/post/CompanyPortal/img/image-1_hu_1facd9194be0227d.png 480w, https://endpointmgt.com/p/companyportal/post/CompanyPortal/img/image-1_hu_332a84a999a09ad7.png 1024w"
loading="lazy"
alt="Software Center"
class="gallery-image"
data-flex-grow="159"
data-flex-basis="383px"
>
&lt;img src="https://endpointmgt.com/p/companyportal/post/CompanyPortal/img/image-2.png"
width="1024"
height="750"
srcset="https://endpointmgt.com/p/companyportal/post/CompanyPortal/img/image-2_hu_d535a47d97a5ad67.png 480w, https://endpointmgt.com/p/companyportal/post/CompanyPortal/img/image-2_hu_59ebae73162b9356.png 1024w"
loading="lazy"
alt="Company Portal"
class="gallery-image"
data-flex-grow="136"
data-flex-basis="327px"
>&lt;/p>
&lt;h2 id="why-should-we-move">Why Should we move
&lt;/h2>&lt;p>I’ll keep this part brief as Microsoft already do a very good job of making recommendations on why you should move but for me, it’s about consistency for users. Giving a user a similar user experience across platform. Users may already have a MacOS or iOS device are already used to using Company Portal for obtain apps. It’s also the place to go when the device compliance workload has been moved and users need to check if and why their devices are non-compliant. Here’s what Microsoft have to say… Install the Intune Company Portal on devices | Microsoft Learn&lt;/p>
&lt;h2 id="how-to-deploy-company-portal">How to deploy Company Portal
&lt;/h2>&lt;p>In this example, we’ll use the new Microsoft store experience natively built into Intune.&lt;/p>
&lt;p>&lt;code>Open Intune via https://endpoint.microsoft.com as a Global Admin or Intune Administrator. Navigate to Apps&amp;gt;Windows Devices&amp;gt; Add App, select the App type, “Microsoft Store app (new)”&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/companyportal/post/CompanyPortal/img/image-3.png"
width="1536"
height="506"
srcset="https://endpointmgt.com/p/companyportal/post/CompanyPortal/img/image-3_hu_bb5d041494171efc.png 480w, https://endpointmgt.com/p/companyportal/post/CompanyPortal/img/image-3_hu_dae460487b549f9e.png 1024w"
loading="lazy"
alt="Windows App List"
class="gallery-image"
data-flex-grow="303"
data-flex-basis="728px"
>&lt;/p>
&lt;p>&lt;code>Search and select Company Portal&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/companyportal/post/CompanyPortal/img/image-4.png"
width="844"
height="248"
srcset="https://endpointmgt.com/p/companyportal/post/CompanyPortal/img/image-4_hu_77cf62c5b5d7342.png 480w, https://endpointmgt.com/p/companyportal/post/CompanyPortal/img/image-4_hu_b6e47257dee54932.png 1024w"
loading="lazy"
alt="Search for Company Portal"
class="gallery-image"
data-flex-grow="340"
data-flex-basis="816px"
>&lt;/p>
&lt;p>&lt;code>Confirm the app details.&lt;/code>&lt;/p>
&lt;p>One thing to note is with the new store experience, apps do not have application Icons (a bit like SCCM doesn’t, you;&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/companyportal/post/CompanyPortal/img/image-5.png"
width="796"
height="907"
srcset="https://endpointmgt.com/p/companyportal/post/CompanyPortal/img/image-5_hu_25299ff8ae8844ec.png 480w, https://endpointmgt.com/p/companyportal/post/CompanyPortal/img/image-5_hu_3c995d00ed729ab4.png 1024w"
loading="lazy"
alt="Update App details"
class="gallery-image"
data-flex-grow="87"
data-flex-basis="210px"
>&lt;/p>
&lt;p>&lt;code>Click Next and then decide where to deploy the app to before clicking next and Create.&lt;/code>&lt;/p>
&lt;h2 id="decide-on-whats-available-in-company-portal">Decide on what’s available in Company Portal
&lt;/h2>&lt;p>Now that you’ve deployed the Company Portal, you need to decide what you want to show and hide from users. Microsoft recently released new options to give administrators control over what users see. To access these new controls, following these steps to configure you’re desired settings.&lt;/p>
&lt;p>Here you will see the options available under Configuration, the options are;&lt;/p>
&lt;ul>
&lt;li>Azure AD Enterprise Applications&lt;/li>
&lt;li>Office Online Applications&lt;/li>
&lt;li>Configuration Manager Applications&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://endpointmgt.com/p/companyportal/post/CompanyPortal/img/image-6.png"
width="823"
height="654"
srcset="https://endpointmgt.com/p/companyportal/post/CompanyPortal/img/image-6_hu_77df27c18eb1b271.png 480w, https://endpointmgt.com/p/companyportal/post/CompanyPortal/img/image-6_hu_51548cf7004d464.png 1024w"
loading="lazy"
alt="Tenant Branding within Intune"
class="gallery-image"
data-flex-grow="125"
data-flex-basis="302px"
>&lt;/p>
&lt;p>The defaults are shown above. To change these defaults –&lt;/p>
&lt;p>&lt;code>Scroll up to edit, scroll down to App Sources and change the hide to show as necessary before selecting Review and Save.&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/companyportal/post/CompanyPortal/img/image-7.png"
width="533"
height="186"
srcset="https://endpointmgt.com/p/companyportal/post/CompanyPortal/img/image-7_hu_cf13e8a4a8bd5668.png 480w, https://endpointmgt.com/p/companyportal/post/CompanyPortal/img/image-7_hu_5995c8ca11e0d896.png 1024w"
loading="lazy"
alt="App Sources"
class="gallery-image"
data-flex-grow="286"
data-flex-basis="687px"
>&lt;/p>
&lt;h2 id="user-notification-and-improving-the-user-experience">User Notification and improving the user experience
&lt;/h2>&lt;p>Now that the app is deployed, apps are displayed within Company Portal. When it comes time to deploy a new app or app update, we don’t really want users to be notified by Software Center. To prevent this, we need to update the SCCM client settings.&lt;/p>
&lt;p>&lt;code>Open SCCM Admin Console as a Full Administrator&lt;/code>
&lt;code>Navigate to Administration&amp;gt;Client Settings, right click and create a Custom Device Client setting&lt;/code>&lt;/p>
&lt;p>!Configuration Manager Client Settings](img/image-8.png)&lt;/p>
&lt;p>&lt;code>Give the client device setting a name, I’ve gone for “Company Portal Workload”, tick the option of software centre&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/companyportal/post/CompanyPortal/img/image-9.png"
width="777"
height="724"
srcset="https://endpointmgt.com/p/companyportal/post/CompanyPortal/img/image-9_hu_4d0303a1c4cf030f.png 480w, https://endpointmgt.com/p/companyportal/post/CompanyPortal/img/image-9_hu_e82033f6289122dc.png 1024w"
loading="lazy"
alt="Custom Client Settings"
class="gallery-image"
data-flex-grow="107"
data-flex-basis="257px"
>&lt;/p>
&lt;p>&lt;code>Select on Software Center and under device settings, change the select the user portal from Software Center to Company Portal and click OK&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://endpointmgt.com/p/companyportal/post/CompanyPortal/img/image-10.png"
width="778"
height="724"
srcset="https://endpointmgt.com/p/companyportal/post/CompanyPortal/img/image-10_hu_84f834ddec67712b.png 480w, https://endpointmgt.com/p/companyportal/post/CompanyPortal/img/image-10_hu_3f18d239422179a7.png 1024w"
loading="lazy"
alt="Custom Client Settings Continued"
class="gallery-image"
data-flex-grow="107"
data-flex-basis="257px"
>&lt;/p>
&lt;p>Once created, deploy this new client setting profile to a suitable device collection&lt;/p>
&lt;p>Now that these settings are deployed, when an app is deployed from SCCM, users will receive any notifications that you have configured as part of the deployment within Company Portal.&lt;/p>
&lt;h2 id="other-things-to-consider">Other things to consider
&lt;/h2>&lt;p>Although not covered within this article, it should be noted that in order to follow this post, the Application workload slider would need to be moved from Software Center to either Pilot or all the way over to Intune.&lt;/p>
&lt;p>Environments without a Cloud Management Gateway (CMG), for devices that are not on a VPN or within the corporate LAN, apps deployed from SCCM will need line of sight connectivity to SCCM for these apps to download and install. If you have a CMG or an always on VPN, remote devices will still be able to download and install apps from Software Center.&lt;/p>
&lt;p>Once you’re happy that everything is working as it should, you can start to think about removing Software Center from end user devices but that’s for another day (and post)&lt;/p>
&lt;p>Thanks for reading.&lt;/p></description></item></channel></rss>